# GPT-4-vision extraction of tables with branched rows/vertically-merged cells - Prompting - OpenAI Developer Community

**URL:** https://community.openai.com/t/gpt-4-vision-extraction-of-tables-with-branched-rows-vertically-merged-cells/728749
**Published:** 2024-04-26T00:00:00.000Z

---

## Summary

The user query is about **multimodal vision-language models, multimodal RAG, document understanding, PDF parsing, chart/table extraction, report generation with LLMs, GPT-4V, Claude vision, Gemini, and structured document output.**

The provided webpage is a discussion thread from the OpenAI Developer Forum titled "GPT-4-vision extraction of tables with branched rows/vertically-merged cells."

**Summary relevant to the query:**

The webpage discusses the challenges of using **GPT-4-vision** for **table extraction** from documents, specifically when dealing with complex structures like **branched rows** (where one row entry corresponds to multiple sub-entries in other columns, such as two Analyte/Result pairs for one Biomarker/Method pair). A user details extensive prompting attempts to get GPT-4V to extract both branches, which it often fails to do, instead ignoring one branch. The discussion also touches upon comparing GPT-4V's performance against traditional **OCR tools built for tables**, noting that GPT-4V's appeal lies in its flexibility for unknown document formats, despite prompting frustrations. Another user later mentions that **GPT-4o vision** also struggles with complex tables with grouped rows and columns.

**Conclusion:** The page directly addresses **GPT-4V/GPT-4o vision** and **table extraction** (a component of document understanding), confirming difficulties with complex table structures.

---

## Full Content

[Skip to main content](https://community.openai.com/t/gpt-4-vision-extraction-of-tables-with-branched-rows-vertically-merged-cells/728749#main-container)

- [Topics](https://community.openai.com/latest)
- More

Resources

- [Documentation](https://platform.openai.com/overview)
- [API reference](https://platform.openai.com/docs/api-reference)
- [Help center](https://help.openai.com)

Categories

- [Announcements](https://community.openai.com/c/announcements/6)
- [API](https://community.openai.com/c/api/7)
- [Prompting](https://community.openai.com/c/prompting/8)
- [Documentation](https://community.openai.com/c/documentation/14)
- [Plugins / Actions builders](https://community.openai.com/c/gpts-builders/chat-plugins/20)
- [All categories](https://community.openai.com/categories)

Tags

- [chatgpt](https://community.openai.com/tag/chatgpt)
- [gpt-4](https://community.openai.com/tag/gpt-4)
- [api](https://community.openai.com/tag/api)
- [lost-user](https://community.openai.com/tag/lost-user)
- [assistants-api](https://community.openai.com/tag/assistants-api)
- [All tags](https://community.openai.com/tags)

Light mode

​

​

Welcome to the OpenAI Developer Forum!

What to know before posting a new question:

1. Search the forum for similar topics - the question might have been discussed before.
2. If the question relates account issues (e.g., billing and login issues), please contact us through our [Help Center](https://help.openai.com/en/).
3. Please be kind and helpful in conversations!

# [GPT-4-vision extraction of tables with branched rows/vertically-merged cells](https://community.openai.com/t/gpt-4-vision-extraction-of-tables-with-branched-rows-vertically-merged-cells/728749)

[Prompting](https://community.openai.com/c/prompting/8)

[gpt-4-vision](https://community.openai.com/tag/gpt-4-vision)

You have selected **0** posts.

select all

cancel selecting

2.1kviews
2links

[3](https://community.openai.com/u/Azure231)

[3](https://community.openai.com/u/anon10827405)

[2](https://community.openai.com/u/janos)

[2](https://community.openai.com/u/piam22)

Summarize

[Apr 2024](https://community.openai.com/t/gpt-4-vision-extraction-of-tables-with-branched-rows-vertically-merged-cells/728749/1)

2 / 10

Apr 2024

[Mar 8](https://community.openai.com/t/gpt-4-vision-extraction-of-tables-with-branched-rows-vertically-merged-cells/728749/10)

[Azure231](https://community.openai.com/u/Azure231)

[Apr 2024](https://community.openai.com/t/gpt-4-vision-extraction-of-tables-with-branched-rows-vertically-merged-cells/728749)

I’m struggling with a specific use-case and wondering if anyone has any insight.

I have been using GPT-4-vision to extract data from medical test documents. There are a range of different formats.

GPT-4-vision does very well at identifying the correct table and extracting all of the data with the one key exception of branched rows.

Columns: Biomarker, Method, Analyte, Result

Unbranched row: 1 Biomarker, 1 Method, 1 Analyte, 1 Result (all values aligned horizontally)
Branched row: 1 Biomarker, 1 Method, 2 Analytes, 2 Results (Analyte and Result values are horizontally above and below Biomarker and Method).

(which rows are branched varies from document to document)

In these cases, the model usually extracts one of the branches (sometimes upper, sometimes lower) and ignores the other.

I’m going crazy trying to word a prompt to get it to extract both branches. Some of the things I have tried include:

1. Describing branched rows in every way I can think of (branched, shared, vertically-merged cells/values, etc.).
2. Telling it exactly which rows are branched (not feasible in production).
3. Telling it to extract only the 2 Analyte and 2 Result values for a specific biomarker.
4. Telling it to index the table by Result.
5. Telling it to output the results in different formats (csv, html).

In frustration:
4\. Telling it to extract only the Result column, and exactly how many values there should be (skipped the branched values, used values from a later table to fill in the number).

1. Telling it to extract ALL WORDS in the image with no mention of a table (extracted all words except the branched values).

I’ve found examples online of extracting tables, but none with this sort of format. Has anyone found an approach for this?

2.1kviews
2links

[3](https://community.openai.com/u/Azure231)

[3](https://community.openai.com/u/anon10827405)

[2](https://community.openai.com/u/janos)

[2](https://community.openai.com/u/piam22)

Summarize

[anon10827405](https://community.openai.com/u/anon10827405)

[Apr 2024](https://community.openai.com/t/gpt-4-vision-extraction-of-tables-with-branched-rows-vertically-merged-cells/728749/2)

Out of curiosity why are you using GPT-4V and not a typical OCR that’s built for tables?

[Azure231](https://community.openai.com/u/Azure231)

[Apr 2024](https://community.openai.com/t/gpt-4-vision-extraction-of-tables-with-branched-rows-vertically-merged-cells/728749/3)

Actually, I currently do. This is just exploring alternatives.

[anon10827405](https://community.openai.com/u/anon10827405)

[Apr 2024](https://community.openai.com/t/gpt-4-vision-extraction-of-tables-with-branched-rows-vertically-merged-cells/728749/4)

The issue as you’ve found is that you are confined to only prompting…You _could_ try to manually adjust the image itself or even find some consistent structures and automatically cut the tables out and then query them individually, but this process has already been accomplished using these table-OCR models.

In your tests what has made you lean more towards frustratingly prompting GPT-V?

[Azure231](https://community.openai.com/u/Azure231)

[Apr 2024](https://community.openai.com/t/gpt-4-vision-extraction-of-tables-with-branched-rows-vertically-merged-cells/728749/5)

Yeah, I see what you mean. I don’t want to divert too much from the original topic because I am hoping there is a fix for this.

I wouldn’t say I’m leaning towards GPT yet, but the appeal of it over the OCR approaches I have used is its flexibility in finding the right data and avoiding the wrong data when I don’t know what the document looks like in advance.

5 months later

[janos](https://community.openai.com/u/janos)

anon10827405

[Sep 2024](https://community.openai.com/t/gpt-4-vision-extraction-of-tables-with-branched-rows-vertically-merged-cells/728749/6)

Hi, I have a similar use case, but the data is party handwritten.

Can you recommend the best working OCR tools for tables you have experience?

Thanks,
Janos

[anon10827405](https://community.openai.com/u/anon10827405)

[Sep 2024](https://community.openai.com/t/gpt-4-vision-extraction-of-tables-with-branched-rows-vertically-merged-cells/728749/7)

I wouldn’t be able to say which is the best for your use-case without seeing a decent amount of these documents. The general idea is straightforward though:

First I’d try to run a pre-built table OCR tool and see if it can manage them without adding complexity. If not, well.

If the table structure is consistent you an implement a multi-stage OCR.

Classify → Segment → OCR

There was a new paper released regarding OCRing documents. There is a nice demo you can try out that uses all the types of OCR necessary:

11 days later

[janos](https://community.openai.com/u/janos)

[Oct 2024](https://community.openai.com/t/gpt-4-vision-extraction-of-tables-with-branched-rows-vertically-merged-cells/728749/8)

Thank you Ronald, I’ll give it a try!

5 months later

[piam22](https://community.openai.com/u/piam22)

[Mar 8](https://community.openai.com/t/gpt-4-vision-extraction-of-tables-with-branched-rows-vertically-merged-cells/728749/9)

I also tried for complex tables with grouped rows and columns and gpt-4o vision struggles to extract tables.

[piam22](https://community.openai.com/u/piam22)

[Mar 8](https://community.openai.com/t/gpt-4-vision-extraction-of-tables-with-branched-rows-vertically-merged-cells/728749/10)

[@Azure231](https://community.openai.com/u/azure231) any luck so far??

Reply

### Related topics

| Topic | Replies | Views | Activity |
| --- | --- | --- | --- |
| [GPT-4o-vision for extraction of complex tables](https://community.openai.com/t/gpt-4o-vision-for-extraction-of-complex-tables/1138461) [Prompting](https://community.openai.com/c/prompting/8) [gpt-4](https://community.openai.com/tag/gpt-4), [gpt-4o](https://community.openai.com/tag/gpt-4o) | [0](https://community.openai.com/t/gpt-4o-vision-for-extraction-of-complex-tables/1138461/1) | 158 | [Mar 8](https://community.openai.com/t/gpt-4o-vision-for-extraction-of-complex-tables/1138461/1) |
| [Data points in tables and charts in images](https://community.openai.com/t/data-points-in-tables-and-charts-in-images/835914) [Prompting](https://community.openai.com/c/prompting/8) [gpt-4](https://community.openai.com/tag/gpt-4) | [7](https://community.openai.com/t/data-points-in-tables-and-charts-in-images/835914/1) | 1.7k | [5d](https://community.openai.com/t/data-points-in-tables-and-charts-in-images/835914/8) |
| [GPT Assistant talks about their task or just posts an example instead of actually performing the task](https://community.openai.com/t/gpt-assistant-talks-about-their-task-or-just-posts-an-example-instead-of-actually-performing-the-task/530970) [Prompting](https://community.openai.com/c/prompting/8) [gpt-4](https://community.openai.com/tag/gpt-4) | [3](https://community.openai.com/t/gpt-assistant-talks-about-their-task-or-just-posts-an-example-instead-of-actually-performing-the-task/530970/1) | 940 | [Nov 2023](https://community.openai.com/t/gpt-assistant-talks-about-their-task-or-just-posts-an-example-instead-of-actually-performing-the-task/530970/4) |
| [Assistance Required for Improving GPT’s accuracy and consistency in generating responses for structured tabular data queries](https://community.openai.com/t/assistance-required-for-improving-gpts-accuracy-and-consistency-in-generating-responses-for-structured-tabular-data-queries/1095976) [API](https://community.openai.com/c/api/7) | [3](https://community.openai.com/t/assistance-required-for-improving-gpts-accuracy-and-consistency-in-generating-responses-for-structured-tabular-data-queries/1095976/1) | 94 | [Jan 20](https://community.openai.com/t/assistance-required-for-improving-gpts-accuracy-and-consistency-in-generating-responses-for-structured-tabular-data-queries/1095976/4) |
| [Spatial awareness of small tabled data. Best method?](https://community.openai.com/t/spatial-awareness-of-small-tabled-data-best-method/967704) [Prompting](https://community.openai.com/c/prompting/8) [gpt-4](https://community.openai.com/tag/gpt-4), [o1](https://community.openai.com/tag/o1) | [10](https://community.openai.com/t/spatial-awareness-of-small-tabled-data-best-method/967704/1) | 434 | [Oct 2024](https://community.openai.com/t/spatial-awareness-of-small-tabled-data-best-method/967704/11) |

Topic list, column headers with buttons are sortable.

Developer Community

Connect with other developers building with the OpenAI Platform.

Help

- [Support](https://help.openai.com/en/articles/6614161-how-can-i-contact-support)

Developer Resources

- [API Documentation](https://platform.openai.com/overview)
- [Service status](https://status.openai.com)
- [Cookbook](https://github.com/openai/openai-cookbook)

[Terms & policies](https://openai.com/policies) [Privacy policy](https://openai.com/policies/privacy-policy)

Invalid date

Invalid date
