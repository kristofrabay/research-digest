# Using memory with Agents

**URL:** https://learn.microsoft.com/en-us/semantic-kernel/frameworks/agent/agent-memory
**Published:** 2025-06-09T00:00:00.000Z

---

## Summary

The provided web page focuses on **Using memory with Semantic Kernel Agents**, specifically detailing two memory components: **Mem0** for long-term, personalized memory across conversations, and **Whiteboard Memory** for short-term context retention within ongoing conversations, even if the chat history is truncated.

The summary relevant to your query is:

*   **Agent Memory:** The page discusses adding memory functionality to Semantic Kernel Agents.
*   **Agent Frameworks:** The context is specifically within the **Semantic Kernel** framework.
*   **Agentic Memory:** It details two mechanisms for agent memory:
    *   **Mem0:** A self-improving memory layer integrated via `Microsoft.SemanticKernel.Memory.Mem0Provider` to remember user preferences and context across multiple threads (long-term memory). It supports scoping by User ID.
    *   **Whiteboard Memory:** Implemented via `Microsoft.SemanticKernel.Memory.WhiteboardProvider`, this captures and retains the most relevant information (requirements, decisions, actions) from the current conversation for short-term context.
*   **Orchestration/Combining:** It shows how to combine both Mem0 and Whiteboard memory providers within the same `AgentThread` for a balance of long-term and short-term context.

**The page does not mention or discuss:** MCP servers, tool use, LangChain, LlamaIndex, OpenAI Agents SDK, Anthropic Agents SDK, Google SDK, function calling, structured outputs, or agent orchestration outside of combining the two memory types within Semantic Kernel.

**Conclusion:** The page provides information on **agent memory** and **agent frameworks (Semantic Kernel)**, but does not cover most of the other specific technologies listed in your query.

---

## Full Content

Adding memory to Semantic Kernel Agents | Microsoft Learn
[Skip to main content](#main)[Skip to Ask Learn chat experience](#)
This browser is no longer supported.
Upgrade to Microsoft Edge to take advantage of the latest features, security updates, and technical support.
[Download Microsoft Edge]()[More info about Internet Explorer and Microsoft Edge](https://learn.microsoft.com/en-us/lifecycle/faq/internet-explorer-microsoft-edge)
[Learn](https://learn.microsoft.com/en-us/)[](https://www.microsoft.com)
Suggestions will filter as you type
[Sign in](#)
![]()
![]()
* [Profile](https://learn.microsoft.com/en-us/users/me/activity/)
* [Settings](https://learn.microsoft.com/en-us/users/me/settings/)
[Sign out](#)
[](https://www.microsoft.com)
[Learn](https://learn.microsoft.com/en-us/)
Suggestions will filter as you type
[Sign in](#)
![]()
![]()
* [Profile](https://learn.microsoft.com/en-us/users/me/activity/)
* [Settings](https://learn.microsoft.com/en-us/users/me/settings/)
[Sign out](#)
[Semantic Kernel](https://learn.microsoft.com/en-us/semantic-kernel/)
[Open Semantic Kernel Repo](https://aka.ms/skrepo)
Table of contentsExit editor mode
Ask LearnAsk LearnFocus mode
Table of contents[Read in English](https://learn.microsoft.com/en-us/semantic-kernel/frameworks/agent/agent-memory)Add to CollectionsAdd to plan[Edit](https://github.com/MicrosoftDocs/semantic-kernel-docs/blob/main/semantic-kernel/Frameworks/agent/agent-memory.md)
#### Share via
[Facebook](https://www.facebook.com/sharer/sharer.php?u=https://learn.microsoft.com/en-us/semantic-kernel/frameworks/agent/agent-memory?WT.mc_id=facebook)[x.com](https://twitter.com/intent/tweet?original_referer=https://learn.microsoft.com/en-us/semantic-kernel/frameworks/agent/agent-memory?WT.mc_id=twitter&amp;tw_p=tweetbutton&amp;url=https://learn.microsoft.com/en-us/semantic-kernel/frameworks/agent/agent-memory?WT.mc_id=twitter)[LinkedIn]()[Email]()
Print
Note
Access to this page requires authorization. You can try[signing in](#)orchanging directories.
Access to this page requires authorization. You can trychanging directories.
# Using memory with Agents
Feedback
Choose a programming language
C#PythonJava
Summarize this article for me
Warning
The Semantic Kernel Agent Memory functionality is experimental, is subject to change and will only be finalized based on feedback and evaluation.
It's often important for an agent to remember important information.
This information may be retained for the duration of a conversation or longer term to span multiple conversations.
The information may be learned from interacting with a user and may be specific to that user.
We call this information memories.
To capture and retain memories, we support components that can be used with an`AgentThread`to extract memories from any messages that are added to the thread, and provide those memories to the agent as needed.
[](#using-mem0-for-agent-memory)## Using Mem0 for Agent memory
[Mem0](https://mem0.ai)is a self-improving memory layer for LLM applications, enabling personalized AI experiences.
The`Microsoft.SemanticKernel.Memory.Mem0Provider`integrates with the Mem0 service allowing agents to remember user preferences and context across multiple threads, enabling a seamless user experience.
Each message added to the thread is sent to the Mem0 service to extract memories.
For each agent invocation, Mem0 is queried for memories matching the provided user request, and any memories are added to the agent context for that invocation.
The Mem0 memory provider can be configured with a user id to allow storing memories about the user, long term, across multiple threads.
It can also be configured with a thread id or to use the thread id of the agent thread, to allow for short term memories that are only attached to a single thread.
Here is an example of how to use this component.
C#Copy
```
`// Create an HttpClient for the Mem0 service.usingvarhttpClient =newHttpClient()
{
BaseAddress =newUri("https://api.mem0.ai")
};
httpClient.DefaultRequestHeaders.Authorization =newAuthenticationHeaderValue("Token","&lt;&lt;Your\_Mem0\_API\_Key&gt;&gt;");// Create a Mem0 provider for the current user.varmem0Provider =newMem0Provider(httpClient, options:new()
{
UserId ="U1"});// Clear any previous memories (optional).awaitmem0Provider.ClearStoredMemoriesAsync();// Add the mem0 provider to the agent thread.ChatHistoryAgentThread agentThread =new();
agentThread.AIContextProviders.Add(mem0Provider);// Use the agent with mem0 memory.ChatMessageContent response =awaitagent.InvokeAsync("Please retrieve my company report", agentThread).FirstAsync();
Console.WriteLine(response.Content);`
```
[](#mem0provider-options)### Mem0Provider options
The`Mem0Provider`can be configured with various options to customize its behavior.
Options are provided using the`Mem0ProviderOptions`class to the`Mem0Provider`constructor.
[](#scoping-options)#### Scoping Options
Mem0 provides the ability to scope memories by Application, Agent, Thread and User.
Options are available to provide ids for these scopes, so that the memories can be stored in mem0 under these ids.
See the`ApplicationId`,`AgentId`,`ThreadId`and`UserId`properties on`Mem0ProviderOptions`.
In some cases you may want to use the thread id of the server side agent thread, when using a service based agent.
The thread may however not have been created yet when the`Mem0Provider`object is being constructed.
In this case, you can set the`ScopeToPerOperationThreadId`option to`true`, and the`Mem0Provider`will
use the id of the`AgentThread`when it is available.
[](#context-prompt)#### Context Prompt
The`ContextPrompt`option allows you to override the default prompt that is prefixed to memories.
The prompt is used to contextualize the memories provided to the AI model, so that the AI model knows what they are and how to use them.
[](#using-whiteboard-memory-for-short-term-context)## Using Whiteboard Memory for Short-Term Context
The whiteboard memory feature allows agents to capture and retain the most relevant information from a conversation, even when the chat history is truncated.
Each message added to the conversation is processed by the`Microsoft.SemanticKernel.Memory.WhiteboardProvider`to extract requirements, proposals, decisions, actions.
These are stored on a whiteboard and provided to the agent as additional context on each invocation.
Here is an example of how to set up Whiteboard Memory:
C#Copy
```
`// Create a whiteboard provider.varwhiteboardProvider =newWhiteboardProvider(chatClient);// Add the whiteboard provider to the agent thread.ChatHistoryAgentThread agentThread =new();
agentThread.AIContextProviders.Add(whiteboardProvider);// Simulate a conversation with the agent.awaitagent.InvokeAsync("I would like to book a trip to Paris.", agentThread);// Whiteboard should now contain a requirement that the user wants to book a trip to Paris.`
```
Benefits of Whiteboard Memory
* Short-Term Context: Retains key information about the goals of ongoing conversations.
* Allows Chat History Truncation: Supports maintaining critical context if the chat history is truncated.
[](#whiteboardprovider-options)### WhiteboardProvider options
The`WhiteboardProvider`can be configured with various options to customize its behavior.
Options are provided using the`WhiteboardProviderOptions`class to the`WhiteboardProvider`constructor.
[](#maxwhiteboardmessages)#### MaxWhiteboardMessages
Specifies a maximum number of messages to retain on the whiteboard.
When the maximum is reached, less valuable messages will be removed.
[](#contextprompt)#### ContextPrompt
When providing the whiteboard contents to the AI model it's important to describe what the messages are for.
This setting allows overriding the default messaging that is built into the`WhiteboardProvider`.
[](#whiteboardemptyprompt)#### WhiteboardEmptyPrompt
When the whiteboard is empty, the`WhiteboardProvider`outputs a message saying that it is empty.
This setting allows overriding the default messaging that is built into the`WhiteboardProvider`.
[](#maintenanceprompttemplate)#### MaintenancePromptTemplate
The`WhiteboardProvider`uses an AI model to add/update/remove messages on the whiteboard.
It has a built in prompt for making these updates.
This setting allows overriding this built-in prompt.
The following parameters can be used in the template:
* `{{$maxWhiteboardMessages}}`: The maximum number of messages allowed on the whiteboard.
* `{{$inputMessages}}`: The input messages to be added to the whiteboard.
* `{{$currentWhiteboard}}`: The current state of the whiteboard.
[](#combining-mem0-and-whiteboard-memory)## Combining Mem0 and Whiteboard Memory
You can use both Mem0 and whiteboard memory in the same agent to achieve a balance between long-term and short-term memory capabilities.
C#Copy
```
`// Add both Mem0 and whiteboard providers to the agent thread.agentThread.AIContextProviders.Add(mem0Provider);
agentThread.AIContextProviders.Add(whiteboardProvider);// Use the agent with combined memory capabilities.ChatMessageContent response =awaitagent.InvokeAsync("Please retrieve my company report", agentThread).FirstAsync();
Console.WriteLine(response.Content);`
```
By combining these memory features, agents can provide a more personalized and context-aware experience for users.
[](#next-steps)## Next steps
[Explore the Agent with Mem0 sample](https://github.com/microsoft/semantic-kernel/blob/main/dotnet/samples/Concepts/Agents/ChatCompletion_Mem0.cs)[Explore the Agent with Whiteboard sample](https://github.com/microsoft/semantic-kernel/blob/main/dotnet/samples/Concepts/Agents/ChatCompletion_Whiteboard.cs)
[](#coming-soon)## Coming Soon
More information coming soon.
[](#coming-soon-1)## Coming Soon
More information coming soon.
## Additional resources
Training
Module
[Orchestrate a multi-agent solution using the Microsoft Agent Framework - Training](https://learn.microsoft.com/en-us/training/modules/orchestrate-semantic-kernel-multi-agent-solution/?source=recommendations)
Learn how to design multi-agent solutions with the Microsoft Agent Framework SDK
* Last updated on06/09/2025
## Ask Learn
Preview
Ask Learn is an AI assistant that can answer questions, clarify concepts, and define terms using trusted Microsoft documentation.
Please sign in to use Ask Learn.
[Sign in](#)
