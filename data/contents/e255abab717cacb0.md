# 

**URL:** https://docs.aws.amazon.com/pdfs/bedrock-agentcore/latest/devguide/bedrock-agentcore-dg.pdf
**Published:** 2025-07-16T00:00:00.000Z

---

## Summary

The Amazon Bedrock AgentCore Developer Guide covers several components related to building and managing agents. Regarding your query:

*   **agent\_infrastructure:** The document details the **Amazon Bedrock AgentCore Runtime** which hosts agents and tools, and mentions support for deploying **MCP servers**. It also discusses using various **agent frameworks** like **LangGraph**, **OpenAI Agents SDK**, and **Google ADK** (though not explicitly listing all mentioned SDKs like LlamaIndex or Anthropic Agents SDK, it mentions integration capabilities).
*   **tool use:** The guide covers **AgentCore Built-in Tools** (Code Interpreter, Browser) and how agents interact with tools via **AgentCore Gateway** (supporting Lambda, API Gateway, OpenAPI schemas, Smithy models, and **MCP servers** targets).
*   **agent memory/agentic memory:** There is a dedicated section on **AgentCore Memory**, detailing **short-term memory** (ephemeral context) and **long-term memory** (using retrieval and custom strategies).
*   **agent frameworks:** The guide explicitly mentions support for using frameworks like **Strands Agents**, **LangGraph**, **Google ADK**, **OpenAI Agents SDK**, **Microsoft AutoGen**, and **CrewAI**.
*   **LangChain/LlamaIndex:** **LangChain** (and **LangGraph**) is mentioned under "Use any agent framework." **LlamaIndex** is not explicitly mentioned.
*   **OpenAI Agents SDK/Anthropic Agents SDK/Google SDK:** **OpenAI Agents SDK** and **Google ADK** are mentioned under supported frameworks. **Anthropic Agents SDK** is not explicitly mentioned.
*   **function calling/structured outputs:** These concepts are not explicitly detailed in the provided text snippets, although they are common features in agent development.
*   **agent orchestration:** The document discusses agent lifecycle, session management, and using frameworks like LangGraph, which implies orchestration capabilities within the AgentCore ecosystem.

In summary, the document provides significant information on **MCP servers**, **tool use**, **agent memory**, **agent frameworks** (including LangChain/LangGraph and OpenAI/Google SDKs), **agent orchestration** (via frameworks and session management), and the **AgentCore Runtime** infrastructure.

The user query is a list of keywords related to agent infrastructure, frameworks, and capabilities: 'agent\_infrastructure: MCP servers, tool use, agent memory, agentic memory, agent frameworks, LangChain, LlamaIndex, OpenAI Agents SDK, Anthropic Agents SDK, Google SDK, function calling, structured outputs, agent orchestration'.

The provided webpage text discusses **Amazon Bedrock AgentCore**, which is an agentic platform. It mentions several components and concepts relevant to the query:

*   **Agent Frameworks:** AgentCore Runtime works with custom and open-source frameworks including **CrewAI, LangGraph, LlamaIndex, Google ADK, OpenAI Agents SDK, and Strands Agents**.
*   **Agent Memory:** AgentCore includes a **Memory** service for building context-aware agents, supporting short-term and long-term memory, and integrating with frameworks like **LangGraph, LangChain, and LlamaIndex**.
*   **MCP Servers:** The **Gateway** service converts APIs into Model Context Protocol (**MCP**)-compatible tools and connects to pre-existing **MCP servers**. The text also details the **AgentCore MCP server** setup.
*   **Tool Use/Function Calling:** The **Gateway** service enables agents to use tools (APIs, Lambda functions). The **Policy** capability controls agent-to-tool interactions.
*   **SDKs:** The text mentions the **AgentCore Python SDK** and integration with **OpenAI Agents SDK** and **Google ADK** (which relates to Google SDK). It does not explicitly mention the **Anthropic Agents SDK**.
*   **Structured Outputs:** Not explicitly detailed, but implied through agent capabilities and evaluation.
*   **Agent Orchestration:** AgentCore Runtime supports multi-agent workloads and extended execution time, suggesting orchestration capabilities.

**Summary:**

Amazon Bedrock AgentCore is an agentic platform that supports building, deploying, and operating AI agents. It integrates with various **agent frameworks** such as **LangGraph, LlamaIndex, CrewAI, and the OpenAI Agents SDK** and **Google ADK**. It provides dedicated services for **agent memory** (supporting short-term and long-term context) and a **Gateway** service to convert APIs into tools compatible with the **Model Context Protocol (MCP)**, allowing connection to existing **MCP servers**. The platform also offers **AgentCore Policy** to govern **tool use** and agent interactions

---

## Full Content

Developer Guide
Amazon Bedrock AgentCore
Copyright © 2025 Amazon Web Services, Inc. and/or its affiliates. All rights reserved.
Amazon Bedrock AgentCore Developer Guide
Amazon Bedrock AgentCore: Developer Guide
Copyright © 2025 Amazon Web Services, Inc. and/or its affiliates. All rights reserved.
Amazon's trademarks and trade dress may not be used in connection with any product or service
that is not Amazon's, in any manner that is likely to cause confusion among customers, or in any
manner that disparages or discredits Amazon. All other trademarks not owned by Amazon are
the property of their respective owners, who may or may not be affiliated with, connected to, or
sponsored by Amazon.
Amazon Bedrock AgentCore Developer Guide
Table of Contents
Overview .......................................................................................................................................... 1
What is Amazon Bedrock AgentCore? ...................................................................................................... 1
Core services in Amazon Bedrock AgentCore ......................................................................................... 2
What can you build with Amazon Bedrock AgentCore? ....................................................................... 5
Pricing for Amazon Bedrock AgentCore .................................................................................................. 6
Next Steps ...................................................................................................................................................... 6
Supported AWS Regions ................................................................................................................. 7
Get started with AgentCore ............................................................................................................ 8
Step 0: Install the AgentCore CLI ............................................................................................................. 8
Step 1: Create your agent .......................................................................................................................... 9
Step 2: Deploy your agent ......................................................................................................................... 9
Step 3: Invoke your agent with prompts .............................................................................................. 10
Next Steps ...................................................................................................................................................... 6
Understand the available interfaces for using AgentCore .......................................................... 11
Amazon Bedrock AgentCore starter toolkit ......................................................................................... 11
AgentCore Python SDK ............................................................................................................................. 12
Amazon Bedrock AgentCore MCP server .............................................................................................. 12
AWS SDK ...................................................................................................................................................... 12
Amazon Bedrock AgentCore console ..................................................................................................... 13
AWS Command Line Interface ................................................................................................................ 13
AgentCore Runtime: Host agent or tools ..................................................................................... 14
How it works ............................................................................................................................................... 16
Key components .................................................................................................................................... 17
Authentication and security ............................................................................................................... 19
Additional features ............................................................................................................................... 21
Implementation overview ................................................................................................................... 22
Understand the AgentCore Runtime service contract ........................................................................ 23
Supported protocols ............................................................................................................................ 23
Compare supported protocols ........................................................................................................... 23
HTTP protocol contract ....................................................................................................................... 24
MCP protocol contract ......................................................................................................................... 31
A2A protocol contract .......................................................................................................................... 33
IAM Permissions for AgentCore Runtime .............................................................................................. 39
Use Amazon Bedrock AgentCore ....................................................................................................... 40
iii
Amazon Bedrock AgentCore Developer Guide
Use the starter toolkit ......................................................................................................................... 40
User permissions for Amazon Bedrock AgentCore Console ......................................................... 43
Execution role for running an agent in AgentCore Runtime ....................................................... 44
Get started with AgentCore Runtime .................................................................................................... 49
Get started with starter toolkit ......................................................................................................... 49
Get started without the starter toolkit ............................................................................................ 58
Get started with direct code deployment ....................................................................................... 67
Get started with bidirectional streaming using WebSocket ......................................................... 84
Use any agent framework ...................................................................................................................... 101
Strands Agents .................................................................................................................................... 101
LangGraph ............................................................................................................................................ 102
Google ADK .......................................................................................................................................... 103
OpenAI Agents SDK ........................................................................................................................... 104
Microsoft AutoGen ............................................................................................................................. 106
CrewAI ................................................................................................................................................... 107
Use any foundation model .................................................................................................................... 109
Amazon Bedrock ................................................................................................................................. 109
Open AI ................................................................................................................................................. 110
Gemini ................................................................................................................................................... 110
Deploy MCP servers ................................................................................................................................. 110
How Amazon Bedrock AgentCore supports MCP ........................................................................ 111
Prerequisites ........................................................................................................................................ 111
Step 1: Create your MCP server ...................................................................................................... 112
Step 2: Test your MCP server locally .............................................................................................. 113
Step 3: Deploy your MCP server to AWS ....................................................................................... 114
Step 4: Invoke your deployed MCP server .................................................................................... 115
Authentication Error Responses for OAuth-Configured Agents ................................................ 117
End to End Flow with Auth0 ........................................................................................................... 117
Appendix ............................................................................................................................................... 131
Deploy A2A servers ................................................................................................................................. 134
How Amazon Bedrock AgentCore supports A2A ......................................................................... 135
Using A2A with AgentCore Runtime .............................................................................................. 136
Appendix ............................................................................................................................................... 144
Use isolated sessions for agents .......................................................................................................... 146
Understanding ephemeral context ................................................................................................. 147
Extended conversations and multi-step workflows ..................................................................... 147
iv
Amazon Bedrock AgentCore Developer Guide
AgentCore Runtime session lifecycle .............................................................................................. 148
How to use sessions ........................................................................................................................... 148
Configure lifecycle settings .............................................................................................................. 149
Stop a running session ...................................................................................................................... 157
Handle asynchronous and long running agents ................................................................................ 162
Key concepts ........................................................................................................................................ 162
Implementing asynchronous tasks ................................................................................................. 163
Complete example ............................................................................................................................. 164
Common issues and solutions ......................................................................................................... 165
Stream agent responses ......................................................................................................................... 165
Pass custom headers ............................................................................................................................... 166
Step 1: Create your agent ................................................................................................................ 167
Step 2: Deploy your agent ............................................................................................................... 168
Step 3: Invoke your agent with custom headers ......................................................................... 169
Step 4: (Optional) Pass the JWT token used for OAuth based inbound access to your
agent ..................................................................................................................................................... 170
Authenticate and authorize with Inbound Auth and Outbound Auth .......................................... 170
JWT inbound authorization and OAuth outbound access sample ............................................ 172
Prerequisites ........................................................................................................................................ 173
Step 1: Create your agent project .................................................................................................. 173
Step 2: Set up AWS Cognito user pool and add a user .............................................................. 174
Step 3: Deploy your agent ............................................................................................................... 176
Step 4: Use bearer token to invoke your agent ........................................................................... 179
OAuth Error Responses ..................................................................................................................... 182
Step 5: Set up your agent to access tools using OAuth ............................................................. 183
Step 6: (Optional) Propagate a JWT token to AgentCore Runtime .......................................... 186
Troubleshooting .................................................................................................................................. 187
AgentCore Runtime versioning and endpoints .................................................................................. 189
How endpoints reference versions .................................................................................................. 189
Versioning scenarios ........................................................................................................................... 190
Endpoint lifecycle states ................................................................................................................... 190
Listing AgentCore Runtime versions and endpoints ................................................................... 191
Invoke an agent .......................................................................................................................................... 22
Invoke streaming agents ................................................................................................................... 192
Invoke multi-modal agents .............................................................................................................. 193
Session management ......................................................................................................................... 194
v
Amazon Bedrock AgentCore Developer Guide
Error handling ..................................................................................................................................... 194
Best practices ...................................................................................................................................... 195
Observe agents ........................................................................................................................................ 195
Troubleshoot ............................................................................................................................................. 195
My agent invocations fail with 504 Gateway Timeout errors .................................................... 196
My Docker build fails with "403 Forbidden" when pulling Python base images .................... 196
I get "Unknown service: 'bedrock-agent-core-runtime'" error when using boto3 .................. 197
I get "AccessDeniedException" when trying to create an Amazon Bedrock AgentCore
Runtime ................................................................................................................................................ 197
My Docker build fails with "exec /bin/sh: exec format error" .................................................... 198
What are the requirements for Docker containers used with Amazon Bedrock AgentCore
Runtime? ............................................................................................................................................... 198
My long-running tool gets interrupted after 15 minutes .......................................................... 198
How do I access the runtimeSessionId in my agent code for tagging or grouping
resources? ............................................................................................................................................. 199
I have RuntimeClientError (403) issues .......................................................................................... 200
I have missing or empty CloudWatch Logs ................................................................................... 201
I have payload format issues ........................................................................................................... 201
I need help understanding HTTP error codes .............................................................................. 202
I need recommendations for testing my agent ........................................................................... 203
I need help debugging container issues ........................................................................................ 203
I need help troubleshooting MCP protocol agents ..................................................................... 204
I need help troubleshooting bidirectional streaming using WebSocket .................................. 204
My code changes aren't reflected in existing sessions ................................................................ 205
Best practices ...................................................................................................................................... 156
AgentCore Memory: Add memory to your agent ...................................................................... 208
Memory types ........................................................................................................................................... 208
Memory key benefits .............................................................................................................................. 209
Common use cases of memory ............................................................................................................ 209
How it works ............................................................................................................................................. 210
Memory terminology ......................................................................................................................... 210
Memory types ..................................................................................................................................... 211
Memory strategies .............................................................................................................................. 213
Memory organization ......................................................................................................................... 255
Compare long-term memory with Retrieval-Augmented Generation ..................................... 258
Get started with AgentCore Memory .................................................................................................. 258
vi
Amazon Bedrock AgentCore Developer Guide
Prerequisites ........................................................................................................................................ 259
Step 1: Create an AgentCore Memory ........................................................................................... 260
Step 2: Write events to memory ..................................................................................................... 261
Step 3: Retrieve records from long term memory ...................................................................... 262
Cleanup ................................................................................................................................................. 263
Next steps ............................................................................................................................................ 263
Create an AgentCore Memory ............................................................................................................... 264
Encrypt your Amazon Bedrock AgentCore Memory .................................................................... 268
Use short-term memory ......................................................................................................................... 270
Create an event ................................................................................................................................... 270
Get an event ........................................................................................................................................ 272
List events ............................................................................................................................................ 273
Delete an event ................................................................................................................................... 273
Use long-term memory .......................................................................................................................... 273
Enable long-term memory ............................................................................................................... 274
Specify memory organization .......................................................................................................... 276
Configure built-in strategies ............................................................................................................ 278
Configure a custom strategy ............................................................................................................ 282
Save and retrieve insights ................................................................................................................ 288
Retrieve memory records .................................................................................................................. 291
List memory records .......................................................................................................................... 292
Delete memory records ..................................................................................................................... 292
Redrive failed ingestions ................................................................................................................... 292
AgentCore Memory examples ............................................................................................................... 295
Customer support AI agent .............................................................................................................. 296
Integrate with LangChain or LangGraph ....................................................................................... 304
AWS SDK .............................................................................................................................................. 309
Amazon Bedrock AgentCore SDK .................................................................................................... 312
Strands Agents SDK ........................................................................................................................... 315
Amazon Bedrock capacity for built-in with overrides strategies .................................................... 318
Observability ............................................................................................................................................. 318
Best practices ............................................................................................................................................ 156
Encrypting your memory .................................................................................................................. 320
Memory poisoning or prompt injection ......................................................................................... 320
Least-privilege principle .................................................................................................................... 321
AgentCore Gateway: Securely connect to tools and resources ................................................. 322
vii
Amazon Bedrock AgentCore Developer Guide
Key benefits .............................................................................................................................................. 322
Key capabilities ......................................................................................................................................... 323
Get started with AgentCore Gateway ................................................................................................. 324
Prerequisites ........................................................................................................................................ 324
Step 1: Setup and install .................................................................................................................. 325
Step 2: Create gateway setup script .............................................................................................. 325
Step 3: Run the setup ....................................................................................................................... 332
Step 4: Use the gateway with an agent ........................................................................................ 332
What you've built ............................................................................................................................... 334
Troubleshooting .................................................................................................................................. 335
Quick validation .................................................................................................................................. 335
Cleanup ................................................................................................................................................. 335
Next steps ............................................................................................................................................ 336
Core concepts ........................................................................................................................................... 337
Key concepts ........................................................................................................................................ 337
Tool types ............................................................................................................................................. 337
AgentCore Gateway features ................................................................................................................. 338
Supported gateway targets ................................................................................................................... 339
Lambda functions ............................................................................................................................... 340
API Gateway stages ............................................................................................................................ 348
OpenAPI schemas ............................................................................................................................... 357
Smithy models .................................................................................................................................... 365
MCP servers targets ........................................................................................................................... 369
Integration provider templates ....................................................................................................... 372
Understand gateway tool naming .................................................................................................. 419
Prerequisites .............................................................................................................................................. 419
Set up dependencies and credentials ............................................................................................ 420
Set up permissions ............................................................................................................................. 423
Set up inbound authorization .......................................................................................................... 432
Set up outbound authorization ....................................................................................................... 437
Set up a gateway ..................................................................................................................................... 445
Gateway workflow .............................................................................................................................. 445
Create a gateway ................................................................................................................................ 446
Add targets to a gateway ................................................................................................................. 469
Use a gateway .......................................................................................................................................... 487
Gateway authorization and authentication ................................................................................... 488
viii
Amazon Bedrock AgentCore Developer Guide
List gateway tools .............................................................................................................................. 494
Call a gateway tool ............................................................................................................................ 499
Search for a gateway tool ................................................................................................................ 505
Connect an agent ............................................................................................................................... 511
Fine-grained access control ................................................................................................................... 513
Using interceptors for access control ............................................................................................. 514
Access control levels .......................................................................................................................... 514
Implementation approaches ............................................................................................................ 514
Best practices ...................................................................................................................................... 515
Debug and assess your gateway .......................................................................................................... 515
Turn on debugging messages .......................................................................................................... 516
Use the MCP Inspector ...................................................................................................................... 518
Log AgentCore Gateway API calls with CloudTrail ...................................................................... 519
Advanced topics ....................................................................................................................................... 533
Customize your gateway's encryption ........................................................................................... 533
Custom domain names ..................................................................................................................... 540
Gateway interceptors ......................................................................................................................... 546
Header propagation ........................................................................................................................... 558
Performance optimization ................................................................................................................ 569
AgentCore Identity: Provide identity management for agent applications ............................. 571
Overview .................................................................................................................................................... 571
Features ................................................................................................................................................ 572
Terminology ......................................................................................................................................... 575
Example use cases .............................................................................................................................. 579
Get started with AgentCore Identity ................................................................................................... 582
Primary getting started tutorial ...................................................................................................... 583
OAuth2 integration getting started tutorial ................................................................................. 583
Common prerequisites ...................................................................................................................... 583
Build your first agent ........................................................................................................................ 584
Google Drive integration .................................................................................................................. 595
Using the console .................................................................................................................................... 602
Configure an OAuth client ................................................................................................................ 603
Configure an API key ......................................................................................................................... 606
Manage agent identities ......................................................................................................................... 608
Understanding identities ................................................................................................................... 609
Agent identity directory .................................................................................................................... 610
ix
Amazon Bedrock AgentCore Developer Guide
Create identities .................................................................................................................................. 614
Inbound JWT authorization ................................................................................................................... 616
Configure an Inbound Authorizer ................................................................................................... 616
Manage credential providers ................................................................................................................. 617
Supported authentication patterns ................................................................................................ 618
Configure credential provider .......................................................................................................... 621
Obtain credentials .............................................................................................................................. 622
Provider setup .......................................................................................................................................... 641
Amazon Cognito ................................................................................................................................. 643
Auth0 by Okta .................................................................................................................................... 647
Atlassian ................................................................................................................................................ 649
CyberArk ............................................................................................................................................... 650
Dropbox ................................................................................................................................................ 651
Facebook ............................................................................................................................................... 653
FusionAuth ........................................................................................................................................... 654
GitHub ................................................................................................................................................... 656
Google ................................................................................................................................................... 657
HubSpot ................................................................................................................................................ 658
LinkedIn ................................................................................................................................................ 660
Microsoft ............................................................................................................................................... 661
Notion ................................................................................................................................................... 663
Okta ....................................................................................................................................................... 664
OneLogin .............................................................................................................................................. 667
PingOne ................................................................................................................................................ 668
Reddit .................................................................................................................................................... 669
Salesforce ............................................................................................................................................. 671
Slack ...................................................................................................................................................... 672
Spotify ................................................................................................................................................... 673
Twitch .................................................................................................................................................... 674
X ............................................................................................................................................................. 675
Yandex ................................................................................................................................................... 677
Zoom ..................................................................................................................................................... 678
Data protection ........................................................................................................................................ 679
Data encryption .................................................................................................................................. 680
Set customer managed key policy .................................................................................................. 681
Configure with API operations or an AWS SDK ........................................................................... 682
x
Amazon Bedrock AgentCore Developer Guide
Configure KMS key for Token Vault on Console .......................................................................... 682
Identity resource tagging ....................................................................................................................... 683
Benefits of tagging AgentCore Identity resources ....................................................................... 683
Resource architecture ........................................................................................................................ 685
Tagging support matrix ..................................................................................................................... 686
AgentCore Built-in Tools: Interact with your applications using built-in tools ....................... 687
Built-in Tools Overview .......................................................................................................................... 687
Security and Access Control ............................................................................................................. 688
Key components ................................................................................................................................. 688
Integrating built-in tools with Agents ........................................................................................... 688
AgentCore Code Interpreter: Execute code and analyze data ........................................................ 689
Overview ............................................................................................................................................... 689
Why use Code Interpreter in agent development ....................................................................... 690
Best practices ...................................................................................................................................... 690
Pre-installed libraries ......................................................................................................................... 691
Get started with AgentCore Code Interpreter .............................................................................. 705
Run code from agents ....................................................................................................................... 715
Write files to a session ...................................................................................................................... 720
Using Terminal Commands with an execution role ..................................................................... 723
Resource and session management ................................................................................................ 727
API Reference Examples .................................................................................................................... 742
Observability ........................................................................................................................................ 750
AgentCore Browser: interact with web applications ........................................................................ 751
Overview ............................................................................................................................................... 751
Why use remote browsers for agent development? ................................................................... 751
Security Features ................................................................................................................................ 752
How it works ....................................................................................................................................... 752
Use cases .............................................................................................................................................. 753
Get started with AgentCore Browser ............................................................................................. 754
Using AgentCore Browser with other libraries ............................................................................. 761
Resource and session management ................................................................................................ 771
Reducing CAPTCHAs with Web Bot Auth ...................................................................................... 794
Rendering live view using DCV client ............................................................................................. 798
Observability and session replay .................................................................................................... 800
Troubleshoot built-in tools .................................................................................................................... 810
Browser tool issues ............................................................................................................................ 810
xi
Amazon Bedrock AgentCore Developer Guide
Code Interpreter issues ..................................................................................................................... 814
AgentCore Observability: Observe your agents and resources ................................................ 815
Get started with AgentCore Observability ......................................................................................... 816
Prerequisites ........................................................................................................................................... 50
Step 1: Enable transaction search on CloudWatch ...................................................................... 817
Step 2: Enable observability for Amazon Bedrock AgentCore Runtime hosted agents ........ 818
Step 3: Enable observability for non-Amazon Bedrock AgentCore-hosted agents ............... 821
Step 4: Observe your agent with GenAI observability on Amazon CloudWatch .................... 823
Best practices ...................................................................................................................................... 156
Add observability to your agents ......................................................................................................... 825
Enabling AgentCore observability ................................................................................................... 826
Enabling observability in agent code for AgentCore-hosted agents ....................................... 828
Enabling observability for agents hosted outside of AgentCore .............................................. 830
Enabling observability for AgentCore runtime, memory, gateway, built-in tools, and
identity resources ............................................................................................................................... 832
Enhanced AgentCore runtime observability with custom headers .......................................... 839
Enhanced AgentCore built-in tools observability with custom headers .................................. 841
Enhanced AgentCore identity observability with custom headers ........................................... 842
Observability best practices ............................................................................................................. 843
Using other observability platforms .............................................................................................. 843
Observability concepts ........................................................................................................................... 843
Sessions ................................................................................................................................................. 844
Traces .................................................................................................................................................... 845
Agent Spans ......................................................................................................................................... 845
Relationship ......................................................................................................................................... 846
AgentCore generated observability data ............................................................................................ 847
Runtime observability data .............................................................................................................. 849
Memory observability data .............................................................................................................. 856
Gateway observability data .............................................................................................................. 859
Built-in tools observability data ...................................................................................................... 866
Identity observability data ............................................................................................................... 874
AgentCore Policy observability data .............................................................................................. 881
View metrics for your agents ................................................................................................................ 884
View data using generative AI observability in Amazon CloudWatch ..................................... 884
View other data in CloudWatch ...................................................................................................... 884
AgentCore MCP Server: Vibe coding with your coding assistant .............................................. 887
xii
Amazon Bedrock AgentCore Developer Guide
Prerequisites .............................................................................................................................................. 887
Install required dependencies .......................................................................................................... 888
Step 1: Install the MCP server .............................................................................................................. 888
Add MCP server configuration ......................................................................................................... 888
Verify MCP server installation ......................................................................................................... 890
Step 2: Transform an existing agent for AgentCore runtime ......................................................... 891
Transform your agent code .............................................................................................................. 891
Transformation procedure ................................................................................................................ 892
Step 3: Deploy your agent to AgentCore runtime ............................................................................ 892
Deploy using the AgentCore CLI ..................................................................................................... 892
Verify deployment .............................................................................................................................. 893
Step 4: Test your deployed agent ........................................................................................................ 893
Invoke the agent ................................................................................................................................. 893
Next steps .................................................................................................................................................. 894
AgentCore Policy: Control Agent-to-Tool Interactions ............................................................. 895
Key benefits .............................................................................................................................................. 895
Key features .............................................................................................................................................. 896
Getting started with AgentCore Policy ............................................................................................... 897
Prerequisites ........................................................................................................................................ 897
Step 1: Setup and install .................................................................................................................. 897
Step 2: Create policy setup script ................................................................................................... 898
Step 3: Run the setup ....................................................................................................................... 904
Step 4: Test the policy ...................................................................................................................... 904
What you've built ............................................................................................................................... 907
Troubleshooting .................................................................................................................................. 907
Clean up ............................................................................................................................................... 907
Core concepts ........................................................................................................................................... 908
Gateway ................................................................................................................................................ 909
Gateway Target ................................................................................................................................... 909
Amazon Bedrock AgentCore Gateway Authorizer ....................................................................... 909
Cedar ..................................................................................................................................................... 909
Cedar Policy ......................................................................................................................................... 909
Policy engine ....................................................................................................................................... 910
Cedar Schema ...................................................................................................................................... 910
Cedar validation .................................................................................................................................. 910
Cedar analysis ...................................................................................................................................... 910
xiii
Amazon Bedrock AgentCore Developer Guide
Policy authoring service .................................................................................................................... 910
Create a policy engine ............................................................................................................................ 911
Prerequisites ........................................................................................................................................ 911
Create a policy engine ....................................................................................................................... 911
Using the policy engine ARN ........................................................................................................... 912
Create a policy .......................................................................................................................................... 912
Understanding Cedar policies .......................................................................................................... 913
Policy scope ......................................................................................................................................... 915
Policy conditions ................................................................................................................................. 918
Authorization flow .............................................................................................................................. 920
Schema constraints ............................................................................................................................ 923
Limitations ............................................................................................................................................ 925
Common policy patterns .................................................................................................................. 926
Writing policies in natural language .................................................................................................... 928
Overview ............................................................................................................................................... 929
Example ................................................................................................................................................ 929
Policy effects ....................................................................................................................................... 930
Authorization semantics .................................................................................................................... 931
Policy elements ................................................................................................................................... 932
Policy examples .................................................................................................................................. 934
Condition syntax ................................................................................................................................. 935
Combining conditions ........................................................................................................................ 937
Common pitfalls ................................................................................................................................. 938
Use policies ............................................................................................................................................... 939
Add policies to the Policy Engine ................................................................................................... 939
Create gateway with AgentCore Policy Engine ............................................................................ 941
Update existing gateway with AgentCore Policy Engine ............................................................ 943
Policy enforcement modes ............................................................................................................... 944
Use a AgentCore Gateway with AgentCore Policy ....................................................................... 944
Manage Policies and Policy Engines ............................................................................................... 949
Errors ..................................................................................................................................................... 954
Example policies ....................................................................................................................................... 955
Available tools ..................................................................................................................................... 956
Authorization policies ........................................................................................................................ 957
Understanding authorization semantics ........................................................................................ 962
Test scenarios ...................................................................................................................................... 962
xiv
Amazon Bedrock AgentCore Developer Guide
AgentCore Evaluations: Evaluate agent performance ............................................................... 964
How it works ............................................................................................................................................. 965
Evaluation terminology ..................................................................................................................... 965
Evaluators ............................................................................................................................................. 967
Evaluation types ................................................................................................................................. 968
Built-in evaluators ................................................................................................................................... 970
Cross region inference ....................................................................................................................... 970
Prompt templates .............................................................................................................................. 971
Custom evaluators ................................................................................................................................... 992
Create evaluator ................................................................................................................................. 992
List evaluators ..................................................................................................................................... 999
Update evaluator .............................................................................................................................. 1000
Get evaluator .................................................................................................................................... 1003
Delete evaluator ............................................................................................................................... 1004
Online evaluation .................................................................................................................................. 1006
Prerequisites ...................................................................................................................................... 1006
Create and deploy your agent ....................................................................................................... 1012
Create online evaluation ................................................................................................................. 1013
Get online evaluation ...................................................................................................................... 1017
List online evaluations .................................................................................................................... 1019
Update online evaluation ............................................................................................................... 1021
Delete online evaluation ................................................................................................................. 1023
Results and output .......................................................................................................................... 1025
On-demand evaluation ........................................................................................................................ 1026
IAM permissions for on-demand evaluation .............................................................................. 1027
Getting started with on-demand evaluation ............................................................................. 1028
Understanding input spans ............................................................................................................ 1038
Security ........................................................................................................................................ 255
Data protection ...................................................................................................................................... 1047
Data encryption ................................................................................................................................ 1049
VPC and AWS PrivateLink .............................................................................................................. 1051
Cross-region inference .................................................................................................................... 1072
Identity and access management ...................................................................................................... 1076
Audience ............................................................................................................................................. 1076
Authenticating with identities ....................................................................................................... 1077
Managing access using policies ..................................................................................................... 1078
xv
Amazon Bedrock AgentCore Developer Guide
How Amazon Bedrock AgentCore works with IAM ................................................................... 1080
Identity-based policy examples ..................................................................................................... 1086
AWS managed policies .................................................................................................................... 1089
Service-linked roles .......................................................................................................................... 1096
Credentials Management ................................................................................................................ 1103
Troubleshooting ................................................................................................................................ 1104
Resource-based policies ....................................................................................................................... 1106
Supported resources ........................................................................................................................ 1106
How resource-based policies work ............................................................................................... 1107
Policy structure ................................................................................................................................. 1109
Supported actions ............................................................................................................................ 1109
Condition keys .................................................................................................................................. 1110
Common use cases and examples ................................................................................................ 1110
Managing resource policies ............................................................................................................ 1113
Security best practices .................................................................................................................... 1115
Troubleshooting ................................................................................................................................ 1116
Compliance validation .......................................................................................................................... 1117
Resilience ................................................................................................................................................. 1117
Cross-service confused deputy prevention ...................................................................................... 1118
Tagging resources ...................................................................................................................... 1120
Tagging overview ................................................................................................................................... 1120
Resources that support tagging ......................................................................................................... 1120
Tag restrictions ....................................................................................................................................... 1121
Working with tags ................................................................................................................................. 1121
Adding tags ....................................................................................................................................... 1121
Managing tags .................................................................................................................................. 1123
Deleting tags ..................................................................................................................................... 1124
Quotas ........................................................................................................................................ 1126
AgentCore Runtime Service Quotas .................................................................................................. 1126
Resource allocation limits ............................................................................................................... 1126
Invocation limits ............................................................................................................................... 1127
Throttling limits ................................................................................................................................ 1128
Lifetime session lifecycle parameters .......................................................................................... 1130
AgentCore Memory Service Quotas .................................................................................................. 1131
AgentCore Identity Service Quotas ................................................................................................... 1139
AgentCore Gateway Service Quotas .................................................................................................. 1140
xvi
Amazon Bedrock AgentCore Developer Guide
Endpoints ........................................................................................................................................... 1140
Service quotas ................................................................................................................................... 1141
AgentCore Browser Service Quotas ................................................................................................... 1142
Browser Invocation Limits .............................................................................................................. 1143
AgentCore Code Interpreter Service Quotas ................................................................................... 1143
Code Interpreter Invocation Limits ............................................................................................... 1144
AgentCore Evaluations Service Quotas ............................................................................................. 1144
AgentCore Resource Based Policies ................................................................................................... 1145
Document history ...................................................................................................................... 1147
xvii
Amazon Bedrock AgentCore Developer Guide
Overview
What is Amazon Bedrock AgentCore?
Amazon Bedrock AgentCore is an agentic platform for building, deploying, and operating highly
effective agents securely at scale using any framework and foundation model. With AgentCore, you
can enable agents to take actions across tools and data with the right permissions and governance,
run agents securely at scale, and monitor agent performance and quality in production - all
without any infrastructure management. AgentCore services work together or independently with
any open-source framework such as CrewAI, LangGraph, LlamaIndex, and Strands Agents and with
any foundation model, so you don’t have to choose between open-source flexibility and enterprisegrade security and reliability.
What is Amazon Bedrock AgentCore? 1
Amazon Bedrock AgentCore Developer Guide
Core services in Amazon Bedrock AgentCore
Amazon Bedrock AgentCore includes the following modular services and capabilities that you can
use together or independently:
Service Description Integrations
Runtime A secure, serverless runtime environment
purpose-built for deploying and scaling
dynamic AI agents and tools. Runtime 
provides fast cold starts for real-time
interactions, extended runtime support
for asynchronous agents, true session
isolation, built-in identity, and support
for multi-modal and multi-agent agentic 
workloads.
AgentCore
Runtime works
with custom 
frameworks and
any open-sour
ce framework,
including CrewAI,
LangGraph, 
LlamaIndex, 
Google ADK,
OpenAI Agents
SDK, and Strands
Agents, any
foundation model 
in or outside of 
Amazon Bedrock
including OpenAI, 
Google's Gemini,
Anthropic's Claude,
Amazon Nova,
Meta Llama, and 
Mistral models, 
and popular 
protocols like MCP
and A2A.
Memory A way to build context-aware agents
with complete control over what the
agent remembers and learns. Supports
for both short-term memory for multiAgentCore
Memory works
with LangGraph 
, LangChain 
Core services in Amazon Bedrock AgentCore 2
Amazon Bedrock AgentCore Developer Guide
Service Description Integrations
turn conversations and long-term
memory that persists across sessions,
with the ability to not only share
memory stores across agents but also
learn from experiences.
, Strands, 
LlamaIndex
Gateway A secure way to convert your APIs,
Lambda functions, and existing services
into Model Context Protocol (MCP)-
compatible tools and also connect to
pre-existing MCP servers, making them
available to AI agents through Gateway
endpoints with just a few lines of code.
Any APIs, MCP
tools, Lamda, and 
popular integrati 
ons including 
Salesfore, Zoom,
JIRA, Slack etc.
Identity A secure, scalable agent identity, access
and authentication management service
which is compatible with existing
identity providers, eliminating needs for
user migration or rebuilding authentic
ation flows.
Any IdP and
credential
providers such as
Amazon Cognito,
Okta, Microsoft
Azure Entra ID,
Auth0 etc.
Code Interpreter An isolated sandbox environment for
agents to execute code enhancing their
accuracy and expanding their ability to
solve complex end-to-end tasks.
Multiple languages 
including Python,
JavaScript and
TypeScript
Browser A fast and secure cloud-based browser
runtime environment to enable AI
agents to interact with web applicati
ons, fill forms, navigate websites, and
extract information in a fully managed
environment.
Any foundation
model or popular 
browser automatio
n framework
s including 
Playwright and
BrowserUse
Core services in Amazon Bedrock AgentCore 3
Amazon Bedrock AgentCore Developer Guide
Service Description Integrations
Observability A unified view to trace, debug and
monitor agent performance in productio
n. It offers detailed visualizations of each 
step in the agent workflow, enabling
you to inspect an agent's execution path,
audit intermediate outputs, and debug 
performance bottlenecks and failures.
Any monitorin
g and observabi
lity stack that
integrate with 
telemetry data
emitted in
standardized
OpenTelemetry
(OTEL)-compatible
format
Evaluations A purpose-built evaluation service for
automated, consistent, and data-driven
agent assessment. AgentCore Evaluatio
ns measures how well your agents and
tools execute tasks, handle edge cases,
and maintain output reliability across
diverse inputs and contexts. Evaluatio
ns provides measurable quality signals,
helps teams optimize performance using
structured insights, and ensures your
agent meets functional and behavioral
standards before and after deployment.
AgentCore
Evaluations 
supports evaluatio
ns on sessions, 
traces, and spans
generated from
Strands Agent
or LangGraph 
frameworks, and
instrumented 
using OpenTelem
etry or OpenInfer
ence. All results
integrated into 
AgentCore
Observabi
lity powered
by Amazon
CloudWatch for
unified monitorin 
g.
Core services in Amazon Bedrock AgentCore 4
Amazon Bedrock AgentCore Developer Guide
Service Description Integrations
Policy A capability that provides determini
stic control to ensure agents operate
within defined boundaries and business 
rules without slowing them down. Easily
author fine-grained rules using natural 
language or Cedar (AWS's open-source
policy language).
Integrates with 
AgentCore
Gateway, to
intercept every
tool call before
execution. You can
define which tools 
agents can access,
what actions they
can perform,
and under what 
conditions.
What can you build with Amazon Bedrock AgentCore?
With Amazon Bedrock AgentCore, developers can accelerate AI agents into production with the
scale, reliability, and security, critical to real-world deployment. Some common use cases for which
you must consider leveraging AgentCore are:
• Agents
Build autonomous AI apps that reason, use tools, and maintain context. Deploy agents for
customer support, workflow automation, data analysis, or coding assistance. Your agent runs
serverless with isolated sessions, persistent memory, and built-in observability.
• Tools and Model Context Protocol (MCP) Servers
Transform existing APIs, databases, or services into tools that any MCP-compatible agent
can use. Deploy a gateway that wraps your Lambda functions or OpenAPI specs making your
backend instantly accessible to agents without rewriting code.
• Agent Platforms
Provide your internal developers or customers with a paved path to build and deploy agents
using approved tools, shared memory stores, and governed access to enterprise services.
Centralize observability, authentication, and compliance while enabling teams to ship agentpowered features faster.
What can you build with Amazon Bedrock AgentCore? 5
Amazon Bedrock AgentCore Developer Guide
Pricing for Amazon Bedrock AgentCore
AgentCore offers flexible, consumption-based pricing with no upfront commitments or minimum
fees. For more information, see AgentCore pricing. AgentCore may use and store your content to
improve your service experience or performance. Such improvements would be for your use of
AgentCore and not for other customers.
Next Steps
If you are a first-time user of Amazon Bedrock AgentCore, we recommend that you begin by
reading the following sections:
• Get started with Amazon Bedrock AgentCore
• Understand the available interfaces for using Amazon Bedrock AgentCore
Pricing for Amazon Bedrock AgentCore 6
Amazon Bedrock AgentCore Developer Guide
Supported AWS Regions
The following table shows which features are supported in each AWS Region:
Feature US 
East 
(N. 
Virginia)
US 
East 
(Ohio)
US 
West
(Oregon)
Europe 
(Frankfur
t)
Europe 
(Ireland)
Europe 
(London)
Europe 
(Paris)
Europe 
(Stockhol 
m)
Asia 
Pacific
(Mumbai)
Asia 
Pacific
(Singapor 
e)
Asia 
Pacific
(Sydney)
Asia 
Pacific
(Tokyo)
Asia 
Pacific
(Seoul)
Canada 
(Central)
South 
America 
(São 
Paulo)
AgentCore
Runtime
✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓
AgentCore
Memory
✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓
AgentCore
Gateway
✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓
AgentCore
Identity
✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓
AgentCore
Builtin 
Tools
✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓
AgentCore
Observabi
lity
✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓
AgentCore
Policy
✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓ ✓
AgentCore
Evaluatio 
ns
✓ ✓ ✓ ✓
7
Amazon Bedrock AgentCore Developer Guide
Get started with Amazon Bedrock AgentCore
This quickstart gets you from zero to running an agent in under five minutes using Amazon
Bedrock AgentCore.
Step 0: Install the AgentCore CLI
Before you start, make sure you have installed the Amazon Bedrock AgentCore Command Line
Interface (CLI) as part of the starter toolkit. Use the below command to install the CLI.
pip install bedrock-agentcore-starter-toolkit
If you face issues with pip install , review the instructions here. Amazon Bedrock AgentCore
requires requires Python version 3.10 or newer. You can check your version:
python3 --version
Step 0: Install the AgentCore CLI 8
Amazon Bedrock AgentCore Developer Guide
If you need to update Python, visit python.org/downloads.
Step 1: Create your agent
Now, create your agent using the below command.
agentcore create
The above command:
• bootstraps a simple agent in Strands Agents, LangGraph, OpenAI Agents Software Development
Kit or Google Agent Development Kit (you can pick which framework)
• uses a foundation model from model providers including Amazon Bedrock, OpenAI, Google's
Gemini, Anthropic's Claude, Amazon Nova, Meta Llama, and Mistral (you can pick which model
provider)
• produces either a project folder in Python with a simple agent, or Infrastructure as Code (IaC)
ready code in Terraform or Cloud Development Kit (CDK) (you can pick)
• automatically creates Gateway, Memory, and enables Observability
• automatically configures role, entrypoint, requirements and auth model
[Optional] Once you have created your agent, start a local dev server to test it manually.
agentcore dev
On a separate terminal, run the below command to test your agent response.
agentcore invoke --dev "Hello!"
Step 2: Deploy your agent
Now, host your simple agent in Amazon Bedrock AgentCore Runtime using the below command. If
you don’t already have permissions, refer to IAM Permissions for AgentCore.
agentcore deploy
The above command:
Step 1: Create your agent 9
Amazon Bedrock AgentCore Developer Guide
• Consolidates all your Python code into a zip file and deploys it
• Deploys your agent to AgentCore Runtime
• Configures CloudWatch logging
Step 3: Invoke your agent with prompts
Now, test your deployed agent with a simple prompt
agentcore invoke '{"prompt": "tell me a joke"}'
If you see a joke in the response, your agent is now running in an AgentCore Runtime and can be
invoked.
Note
Congratulations! You created and deployed your first agent.
Next Steps
After building your first agent with Amazon Bedrock AgentCore, we recommend that you explore
the following sections:
• Add memory to your Amazon Bedrock AgentCore agent
• Enable your agent to interact with web pages using Browser
• Securely connect tools and other resources to your Gateway
• Additional code examples
Step 3: Invoke your agent with prompts 10
Amazon Bedrock AgentCore Developer Guide
Understand the available interfaces for using Amazon
Bedrock AgentCore
Amazon Bedrock AgentCore supports various interfaces for developing and deploying your agent
code. The simplest approach is to use the AgentCore Python SDK to create your agent code and use
the AgentCore starter toolkit to deploy your agent.
The AgentCore starter toolkit and AgentCore Python SDK don't support all AgentCore operations
that the AWS SDK supplies. If they don't support a specific AgentCore operation, use the AWS SDK.
Topics
• Amazon Bedrock AgentCore starter toolkit
• AgentCore Python SDK
• Amazon Bedrock AgentCore MCP server
• AWS SDK
• Amazon Bedrock AgentCore console
• AWS Command Line Interface
Amazon Bedrock AgentCore starter toolkit
The AgentCore starter toolkit provides CLI tools and higher-level abstractions for:
• Create: Set up a skeleton agent project with your preferred framework and model provider
• Deployment: Containerize and deploy agents to AWS infrastructure
• Import Agent: Migrate existing Bedrock Agents to AgentCore with framework conversion
• Gateway Integration: Create and manage gateways for agent tools using the CLI
• Memory Management: Create and manage memory for agents
• Configuration Management: Manage environment and deployment settings
• Observability: Monitor agents in production environments
• AgentCore Evaluations: Assess agent performance and quality
The getting started instructions in this guide use the AgentCore starter toolkit.
Amazon Bedrock AgentCore starter toolkit 11
Amazon Bedrock AgentCore Developer Guide
AgentCore Python SDK
The AgentCore Python SDK provides Python primitives for agent development with built-in
support for:
• Runtime: Lightweight wrapper over the AgentCore operations in the AWS SDK that lets you easily
write Python code for an agent.
• Memory: Persistent storage for conversation history and agent context
• Tools: Built-in clients for code interpretation and browser automation
• Identity: Secure authentication and access management
• AgentCore Evaluations: Automated assessment tools for measuring agent performance
The AgentCore Python SDK supports multiple frameworks, such as Strands Agents and LangGraph.
If you are using other AWS services, you'll need to use the AWS SDK to integrate those services into
your agent, alongside your AgentCore Python SDK code.
Amazon Bedrock AgentCore MCP server
The AgentCore Model Context Protocol (MCP) server helps you transform, deploy, and test
AgentCore-compatible agents directly from your preferred development environment. With builtin support for runtime integration, gateway connectivity, and agent lifecycle management, the
MCP server simplifies moving from local development to production deployment on AgentCore
services.
The MCP server works with popular MCP clients including Kiro, Cursor, Claude Code, and Amazon Q
CLI, providing conversational commands to automate complex agent development workflows.
For more information, see Amazon Bedrock AgentCore MCP Server: Vibe coding with your coding
assistant.
AWS SDK
You can use the AWS SDK to achieve the same results as the AgentCore Python SDK, as well as
other tasks that the AgentCore Python SDK doesn't support. You'll need to use the AWS SDK to
interact with other AWS services such as AWS Lambda and Amazon S3. You'll also need to the AWS
SDK if you aren't using Python as your coding language.
AgentCore Python SDK 12
Amazon Bedrock AgentCore Developer Guide
To configure and deploy an agent, you use the AgentCore control plane API. For example, you can
create an AgentCore Runtime or create an AgentCore Memory.
At runtime, you use the AgentCore data plane API for tasks such as adding a memory event to an
AgentCore Memory. The client code that calls your agent uses the InvokeAgentRuntime data 
plane operation to invoke an agent that you have hosted in an AgentCore Runtime.
Amazon Bedrock AgentCore console
You can use the AgentCore console to create and manage the AgentCore services that your
agent code uses. You can get code snippets that show to call an agent hosted in an AgentCore
Runtime. You can also test your agent in the agent sandbox. Open the console at https://
console.aws.amazon.com/bedrock-agentcore/home#.
AWS Command Line Interface
You can use the AWS CLI with the AgentCore services that you use. Use control plane api to create
and manage services. For example you can create an AgentCore Memory or update the endpoint
for an AgentCore Runtime. You can also perform runtime actions with the data plane API, which 
can be useful for testing an agent.
Amazon Bedrock AgentCore console 13
Amazon Bedrock AgentCore Developer Guide
Host agent or tools with Amazon Bedrock AgentCore
Runtime
Amazon Bedrock AgentCore Runtime provides a secure, serverless and purpose-built hosting
environment for deploying and running AI agents or tools. It offers the following benefits:
Framework agnostic
AgentCore Runtime lets you transform any local agent code to cloud-native deployments
with a few lines of code no matter the underlying framework. Works seamlessly with popular
frameworks like LangGraph, Strands, and CrewAI. You can also leverage it with custom agents
that don't use a specific framework.
Model flexibility
AgentCore Runtime works with any Large Language Model, such as models offered by Amazon
Bedrock, Anthropic Claude, Google Gemini, and OpenAI.
Protocol support
AgentCore Runtime lets agents communicate with other agents and tools via Model Context
Protocol (MCP) or Agent to Agent (A2A).
Session isolation
In AgentCore Runtime, each user session runs in a dedicated microVM with isolated CPU,
memory, and filesystem resources. This helps create complete separation between user
sessions, safeguarding stateful agent reasoning processes and helps prevent cross-session
data contamination. After session completion, the entire microVM is terminated and memory
is sanitized, delivering deterministic security even when working with non-deterministic AI
processes.
Extended execution time
AgentCore Runtime supports both real-time interactions and long-running workloads up to 8
hours, enabling complex agent reasoning and asynchronous workloads that may involve multiagent collaboration or extended problem-solving sessions.
Consumption-based pricing model
Runtime implements consumption-based pricing that charges only for resources actually
consumed. Unlike allocation-based models that require pre-selecting resources, Runtime
14
Amazon Bedrock AgentCore Developer Guide
dynamically provisions what's needed without requiring right-sizing. The service aligns CPU
billing with actual active processing - typically eliminating charges during I/O wait periods
when agents are primarily waiting for LLM responses - while continuously maintaining your
session state.
Built-in authentication
AgentCore Runtime, powered by AgentCore Identity, assigns distinct identities to AI agents and
seamlessly integrates with your corporate identity provider such as Okta, Microsoft Entra ID,
or Amazon Cognito, enabling your end users to authenticate into only the agents they have
access to. In addition, Runtime lets outbound authentication flows to securely access third-party
services like Slack, Zoom, and GitHub - whether operating on behalf of users or autonomously
(using either OAuth or API keys).
Agent-specific observability
AgentCore Runtime provides specialized built-in tracing that captures agent reasoning steps,
tool invocations, and model interactions, providing clear visibility into agent decision-making
processes, a critical capability for debugging and auditing AI agent behaviors.
Enhanced payload handling
AgentCore Runtime can process 100MB payloads enabling seamless processing of multiple
modalities (text, images, audio, video), with rich media content or large datasets.
Bidirectional streaming
AgentCore Runtime supports both HTTP API calls and persistent WebSocket connections for
real-time bidirectional streaming, enabling interactive applications with immediate response
feedback and maintained conversation context.
Unified set of agent-specific capabilities
AgentCore Runtime is delivered through a single, comprehensive SDK that provides streamlined
access to the complete AgentCore capabilities including Memory, Tools, and Gateway.
This integrated approach eliminates the integration work typically required when building
equivalent agent infrastructure from disparate components.
Topics
• How it works
• Understand the AgentCore Runtime service contract
15
Amazon Bedrock AgentCore Developer Guide
• IAM Permissions for AgentCore Runtime
• Get started with AgentCore Runtime
• Use any agent framework
• Use any foundation model
• Deploy MCP servers in AgentCore Runtime
• Deploy A2A servers in AgentCore Runtime
• Use isolated sessions for agents
• Handle asynchronous and long running agents with Amazon Bedrock AgentCore Runtime
• Stream agent responses
• Pass custom headers to Amazon Bedrock AgentCore Runtime
• Authenticate and authorize with Inbound Auth and Outbound Auth
• AgentCore Runtime versioning and endpoints
• Invoke an AgentCore Runtime agent
• Observe agents in Amazon Bedrock AgentCore Runtime
• Troubleshoot AgentCore Runtime
How it works
The Amazon Bedrock AgentCore Runtime handles scaling, session management, security isolation,
and infrastructure management, allowing you to focus on building intelligent agent experiences
rather than operational complexity. By leveraging the features and capabilities described here,
you can build, deploy, and manage sophisticated AI agents that deliver value to your users while
helping to maintain enterprise-grade security and reliability.
Topics
• Key components
• Authentication and security
• Additional features
• Implementation overview
How it works 16
Amazon Bedrock AgentCore Developer Guide
Key components
AgentCore Runtime
An AgentCore Runtime is the foundational component that hosts your AI agent or tool code. It
represents a containerized application that processes user inputs, maintains context, and executes
actions using AI capabilities. When you create an agent, you define its behavior, capabilities, and
the tools it can access. For example, a customer support agent might answer product questions,
process returns, and escalate complex issues to human representatives.
You can build and deploy agents to AgentCore Runtime using the AgentCore Runtime starter
toolkit, the AgentCore Python SDK or directly through AWS SDKs. With the AgentCore Python
SDK, you can define your agent using popular frameworks like LangGraph, CrewAI, or Strands
Agents. The SDK handles infrastructure complexities, allowing you to focus on the agent's logic and
capabilities.
Each AgentCore Runtime:
• Has a unique identity
• Is versioned to support controlled deployment and updates
Versions
Each AgentCore Runtime maintains immutable versions that capture a complete snapshot of the
configuration at a specific point in time:
• When you create an AgentCore Runtime, Version 1 (V1) is automatically created
• Each update to configuration (container image, protocol settings, network settings) creates a
new version
• Each version contains all necessary configuration needed for execution
This versioning system provides reliable deployment history and rollback capabilities.
Endpoints
Endpoints provide addressable access points to specific versions of your AgentCore Runtime. Each
endpoint:
Key components 17
Amazon Bedrock AgentCore Developer Guide
• Has a unique ARN for invocation
• References a specific version of your Agent Runtime
• Provides stable access to your agent even as you update implementations
Key endpoint details:
• The "DEFAULT" endpoint is automatically created when you call CreateAgentRuntime and points 
to the latest version
• When you update your AgentCore Runtime, a new version is created but the DEFAULT endpoint 
automatically updates to reference it
• You can create custom endpoints with the CreateAgentRuntimeEndpoint operation for different
environments (dev, test, prod)
• When a user makes a request to an endpoint, the request is resolved to the specific agent version
referenced by that endpoint
Endpoints have distinct lifecycle states:
• CREATING - Initial state during endpoint creation
• CREATE_FAILED - Indicates creation failure due to permissions or other issues
• READY - Endpoint is operational and accepting requests
• UPDATING - Endpoint is being modified to reference a new version
• UPDATE_FAILED - Indicates update operation failure
You can update endpoints without downtime, allowing for seamless version transitions and
rollbacks.
Sessions
Sessions represent individual interaction contexts between users and your AgentCore Runtime.
Each session:
• Is identified by a unique runtimeSessionId provided by your application, or by the Runtime
itself in the first invocation if the runtimeSessionId is left empty
• Runs in a dedicated microVM with completely isolated CPU, memory, and filesystem resources
Key components 18
Amazon Bedrock AgentCore Developer Guide
• Preserves context across multiple interactions within the same conversation
• Can persist for up to 8 hours of total runtime
Session states include:
• Active - Currently processing a request or executing background tasks
• Idle - Not processing any requests but maintaining context while waiting for next interaction
• Terminated - Session ended due to inactivity (15 minutes), reaching maximum lifetime (8 hours),
or being deemed unhealthy
Important session characteristics:
• After session termination, the entire microVM is terminated and memory is sanitized
• A subsequent request with the same runtimeSessionId after termination will create a new
execution environment
• Session isolation prevents cross-session data contamination and ensures security
• Session state is ephemeral and should not be used for long-term durability (use AgentCore
Memory for context durability)
This complete isolation between sessions is crucial for enterprise security, particularly when dealing
with non-deterministic AI processes.
Authentication and security
Inbound authentication controls who can access your agents through AWS Identity and Access
Management or OAuth 2.0, validating bearer tokens from identity providers before allowing
requests to proceed. Outbound authentication enables your agents to securely access third-party
services using OAuth or API keys, with AgentCore Identity managing credentials in either userdelegated or autonomous modes. For more information, see Authenticate and authorize with
Inbound Auth and Outbound Auth.
Inbound authentication
Inbound Auth, powered by AgentCore Identity, controls who can access and invoke your agents or
tools in AgentCore Runtime.
Authentication and security 19
Amazon Bedrock AgentCore Developer Guide
Authentication methods
• AWS IAM (SigV4): Uses AWS credentia
