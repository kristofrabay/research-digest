# Quickstart with Agent Development Kit 

    
    
       
    

     
      
      Stay organized with collections
     
     
      
      Save and categorize content based on your preferences.

**URL:** https://docs.cloud.google.com/agent-builder/agent-engine/memory-bank/quickstart-adk
**Published:** 2025-10-29T00:00:00.000Z

---

## Summary

The provided web page is a quickstart guide for developing agents using the **Agent Development Kit (ADK)**, focusing on how to integrate and use **Memory Bank** for managing long-term memories.

The summary of the page relevant to your query is:

*   **Agent Orchestration:** The ADK agent orchestrates calls to Memory Bank via an **ADK Runner** or **Agent Engine ADK template** to manage long-term memories.
*   **Agent Memory/Agentic Memory:** The core focus is on using **Memory Bank** for long-term memory management. This is achieved by including a `Memory` tool (like `PreloadMemoryTool`) in the ADK agent definition, which controls when memories are retrieved and included in the prompt.
*   **Agent Frameworks:** The guide specifically uses the **Vertex AI Agent Builder**'s **Agent Development Kit (ADK)**. It mentions using an **ADK Runner** (often in local environments like Colab) or the **Agent Engine ADK template** (for deployment to Agent Engine Runtime).
*   **Tool Use:** The example agent includes a `Memory` tool (`PreloadMemoryTool`) to interact with memory services.
*   **Function Calling/Structured Outputs:** These specific concepts are **not explicitly detailed** in the context of the ADK setup described here, although tool use implies some form of function calling capability.
*   **MCP servers, LangChain, LlamaIndex, OpenAI Agents SDK, Anthropic Agents SDK, Google SDK:** These specific technologies are **not mentioned** in the provided text.

**In summary, the page details setting up an agent using the Google Cloud ADK to leverage Memory Bank for agent memory and orchestration, but it does not cover MCP servers, LangChain, LlamaIndex, or the specific SDKs/frameworks you listed (OpenAI, Anthropic, Google SDK in a general sense beyond ADK).**

---

## Full Content

Quickstart with Agent Development Kit | Vertex AI Agent Builder | Google Cloud Documentation[Skip to main content](#main-content)
[![Google Cloud Documentation](https://www.gstatic.com/devrel-devsite/prod/ve08add287a6b4bdf8961ab8a1be50bf551be3816cdd70b7cc934114ff3ad5f10/clouddocs/images/lockup.svg)](https://docs.cloud.google.com/)
* /
[Console](https://console.cloud.google.com/)
* English
* Deutsch
* Español
* Español –América Latina
* Français
* Indonesia
* Italiano
* Português
* Português –Brasil
* 中文–简体* 中文–繁體* 日本語* 한국어Sign in
[
![](https://docs.cloud.google.com/_static/clouddocs/images/icons/products/vertex-ai-color.svg)
](https://docs.cloud.google.com/agent-builder)
* [Vertex AI Agent Builder](https://docs.cloud.google.com/agent-builder)
[Start free](https://console.cloud.google.com/freetrial)
* [Home](https://docs.cloud.google.com/)
* [Documentation](https://docs.cloud.google.com/docs)
* [AI and ML](https://docs.cloud.google.com/docs/ai-ml)
* [Vertex AI Agent Builder](https://docs.cloud.google.com/agent-builder)
* [Guides](https://docs.cloud.google.com/agent-builder/overview)
Send feedback# Quickstart with Agent Development KitStay organized with collectionsSave and categorize content based on your preferences.
After you configure your Agent Development Kit (ADK) agent to use Memory Bank, your agent orchestrates calls to Memory Bank to[manage long-term memories](https://google.github.io/adk-docs/sessions/memory/#how-memory-works-in-practice)for you.
This tutorial demonstrates how you can use Memory Bank with the ADK to manage long-term memories:
1. [Create your local ADK agent and runner](#create-adk-agent). ADK runners connect your agent to services that provide session and memory management.
2. [Interact with your agent](#interact-with-agent)to dynamically generate long-term memories that are accessible across sessions.
3. [Clean up](#clean-up).
To make calls directly to Memory Bank without ADK orchestration, see[Quickstart with Agent Engine SDK](https://docs.cloud.google.com/agent-builder/agent-engine/memory-bank/quickstart-api). Using the Agent Engine SDK is helpful for understanding how Memory Bank generates memories or for inspecting the contents of Memory Bank.
**Important:**ADK primarily uses[asynchronous functions](https://google.github.io/adk-docs/runtime/#async-is-primary-run_async). If you&#39;re running code in a notebook like Colab, you can directly`await`async functions because an event loop is already running. If you&#39;re running this code as a standard Python script, you need to wrap your async function calls with`asyncio.run()`to create and manage an event loop to execute your async functions. Otherwise, you might get an error like`&#39;await&#39; outside function`.
To see an example of using Memory Bank with ADK,
run the "Get started with Memory Bank on ADK" notebook in one of the following
environments:
[![](https://docs.cloud.google.com/static/vertex-ai/images/colab-logo-32px.png)Open in Colab](https://colab.research.google.com/github/GoogleCloudPlatform/generative-ai/blob/main/agents/agent_engine/memory_bank/get_started_with_memory_bank_on_adk.ipynb)|[![](https://docs.cloud.google.com/static/vertex-ai/images/colab-enterprise-logo-32px.png)Open in Colab Enterprise](https://console.cloud.google.com/vertex-ai/colab/import/https://raw.githubusercontent.com/GoogleCloudPlatform/generative-ai/main/agents/agent_engine/memory_bank/get_started_with_memory_bank_on_adk.ipynb)|[![](https://docs.cloud.google.com/static/vertex-ai/images/vertex-ai-workbench-logo-32px.png)Open
in Vertex AI Workbench](https://console.cloud.google.com/vertex-ai/workbench/deploy-notebook?download_url=https://raw.githubusercontent.com/GoogleCloudPlatform/generative-ai/main/agents/agent_engine/memory_bank/get_started_with_memory_bank_on_adk.ipynb)|[![](https://docs.cloud.google.com/static/vertex-ai/images/github-logo-32px.png)View on GitHub](https://github.com/GoogleCloudPlatform/generative-ai/blob/main/agents/agent_engine/memory_bank/get_started_with_memory_bank_on_adk.ipynb)
## Before you begin
To complete the steps demonstrated in this tutorial, you must first follow the steps in[Set up for Memory Bank](https://docs.cloud.google.com/agent-builder/agent-engine/memory-bank/set-up).
**Note:**If you already have a Google Cloud Project, you can follow the guide with your project number and location using the &quot;Google Cloud Project&quot; instructions. If you are a first time Google Cloud user, you can sign up with your gmail account to get an Express Mode Project and API key without billing through the[Express Mode Registration](https://docs.cloud.google.com/vertex-ai/generative-ai/docs/start/express-mode/overview), and then follow the guide using the &quot;Vertex AI Express Mode&quot; instructions.## Set environment variables
To use the ADK, set your environment variables:
### Google Cloud Project
```
`importosos.environ["GOOGLE\_GENAI\_USE\_VERTEXAI"]="TRUE"os.environ["GOOGLE\_CLOUD\_PROJECT"]="PROJECT\_ID"os.environ["GOOGLE\_CLOUD\_LOCATION"]="LOCATION"`
```
Replace the following:
* PROJECT\_ID: Your project ID.
* LOCATION: Your region. See the[supported regions](https://docs.cloud.google.com/agent-builder/locations#supported-regions-agent-engine)for Memory Bank.
### Vertex AI Express Mode
```
`importosos.environ["GOOGLE\_GENAI\_USE\_VERTEXAI"]="TRUE"os.environ["GOOGLE\_API\_KEY"]="API\_KEY"`
```
Replace the following:
* API\_KEY: Your Vertex AI Express Mode API key. You can sign up with your gmail account to get an API key through the[Express Mode Registration](https://docs.cloud.google.com/vertex-ai/generative-ai/docs/start/express-mode/overview)if you are a first time user to Google Cloud.
## Create your ADK agent
1. When[developing your ADK agent](https://docs.cloud.google.com/agent-builder/agent-engine/develop/adk), include a`Memory`tool that controls when the agent retrieves memories and how memories are included in the prompt. The example agent uses the`PreloadMemoryTool`, which always retrieves memories at the start of each turn and includes the memories in the system instruction:
```
`fromgoogleimportadkagent=adk.Agent(model="gemini-2.0-flash",name='stateful\_agent',instruction="""You are a Vehicle Voice Agent, designed to assist users with information and in-vehicle actions.1. \*\*Direct Action:\*\* If a user requests a specific vehicle function (e.g., "turn on the AC"), execute it immediately using the corresponding tool. You don't have the outcome of the actual tool execution, so provide a hypothetical tool execution outcome.2. \*\*Information Retrieval:\*\* Respond concisely to general information requests with your own knowledge (e.g., restaurant recommendation).3. \*\*Clarity:\*\* When necessary, try to seek clarification to better understand the user's needs and preference before taking an action.4. \*\*Brevity:\*\* Limit responses to under 30 words.""",tools=[adk.tools.preload\_memory\_tool.PreloadMemoryTool()])`
```
2. Create a`VertexAiMemoryBankService`memory service, which the ADK runner uses for retrieving memories. This is optional if you&#39;re using the[Agent Engine ADK template](https://docs.cloud.google.com/agent-builder/agent-engine/develop/adk)instead of defining your own ADK runtime. If you want to configure your Memory Bank instance&#39;s behavior, refer to the[set up guide](https://docs.cloud.google.com/agent-builder/agent-engine/memory-bank/set-up#memory-bank-config).
### Google Cloud Project
```
`fromgoogle.adk.memoryimportVertexAiMemoryBankServiceimport[vertexai](https://docs.cloud.google.com/python/docs/reference/vertexai/latest)client=[vertexai](https://docs.cloud.google.com/python/docs/reference/vertexai/latest).Client(project="PROJECT\_ID",location="LOCATION")# If you don't have an Agent Engine instance already, create an Agent Engine# Memory Bank instance using the default configuration.agent\_engine=client.[agent\_engines](https://docs.cloud.google.com/python/docs/reference/vertexai/latest/vertexai._genai.agent_engines.html).create()# Optionally, print out the Agent Engine resource name. You will need the# resource name to interact with your Agent Engine instance later on.print(agent\_engine.[api\_resource](https://docs.cloud.google.com/python/docs/reference/vertexai/latest/vertexai._genai.types.AgentEngineDict.html#vertexai__genai_types_AgentEngineDict_api_resource).name)agent\_engine\_id=agent\_engine.[api\_resource](https://docs.cloud.google.com/python/docs/reference/vertexai/latest/vertexai._genai.types.AgentEngineDict.html#vertexai__genai_types_AgentEngineDict_api_resource).name.split("/")[-1]memory\_service=VertexAiMemoryBankService(project="PROJECT\_ID",location="LOCATION",agent\_engine\_id=agent\_engine\_id)`
```
Replace the following:
* PROJECT\_ID: Your project ID.
* LOCATION: Your region. See the[supported regions](https://docs.cloud.google.com/vertex-ai/generative-ai/docs/agent-engine/overview#supported-regions)for Memory Bank.
### Vertex AI Express Mode
```
`fromgoogle.adk.memoryimportVertexAiMemoryBankServiceimport[vertexai](https://docs.cloud.google.com/python/docs/reference/vertexai/latest)client=[vertexai](https://docs.cloud.google.com/python/docs/reference/vertexai/latest).Client(api\_key="API\_KEY",)# If you don't have an Agent Engine instance already, create an Agent Engine# Memory Bank instance using the default configuration.agent\_engine=client.[agent\_engines](https://docs.cloud.google.com/python/docs/reference/vertexai/latest/vertexai._genai.agent_engines.html).create()# Optionally, print out the Agent Engine resource name. You will need the# resource name to interact with your Agent Engine instance later on.print(agent\_engine.[api\_resource](https://docs.cloud.google.com/python/docs/reference/vertexai/latest/vertexai._genai.types.AgentEngineDict.html#vertexai__genai_types_AgentEngineDict_api_resource).name)agent\_engine\_id=agent\_engine.[api\_resource](https://docs.cloud.google.com/python/docs/reference/vertexai/latest/vertexai._genai.types.AgentEngineDict.html#vertexai__genai_types_AgentEngineDict_api_resource).name.split("/")[-1]# Make sure your environment variables are set. VertexAiMemoryBankService# will read your api key from the GOOGLE\_API\_KEY environment variable.memory\_service=VertexAiMemoryBankService(agent\_engine\_id=agent\_engine\_id)`
```
Replace the following:
* API\_KEY: Your Vertex AI Express Mode API key. You can sign up with your gmail account to get an API key through the[Express Mode Registration](https://docs.cloud.google.com/vertex-ai/generative-ai/docs/start/express-mode/overview)if you are a first time user to Google Cloud.
[`VertexAiMemoryBankService`](https://github.com/google/adk-python/blob/main/src/google/adk/memory/vertex_ai_memory_bank_service.py)is an ADK wrapper around Memory Bank that is defined by ADK&#39;s[`BaseMemoryService`](https://github.com/google/adk-python/blob/main/src/google/adk/memory/base_memory_service.py)and uses a different interface than the Agent Engine SDK. You can use the Agent Engine SDK to make[direct API calls to Memory Bank](https://docs.cloud.google.com/agent-builder/agent-engine/memory-bank/quickstart-api). The`VertexAiMemoryBankService`interface includes:
* `memory\_service.add\_session\_to\_memory`which triggers a[`GenerateMemories`](https://docs.cloud.google.com/agent-builder/agent-engine/memory-bank/generate-memories)request to Memory Bank using the provided`adk.Session`as the source content. Calls to this method are not orchestrated by the ADK runner. If you want to automate memory generation with ADK, you need to define your own callback functions.
* `memory\_service.search\_memory`which triggers a[`RetrieveMemories`](https://docs.cloud.google.com/agent-builder/agent-engine/memory-bank/fetch-memories#scope-based)request to Memory Bank to fetch relevant memories for the current`user\_id`and`app\_name`. Calls to this method are orchestrated by the ADK runner when you provide a Memory tool to your agent.
* Create an[ADK Runtime](https://google.github.io/adk-docs/runtime/), which orchestrates the execution of your agents, tools, and callbacks. The ADK Runner setup depends on which deployment environment you&#39;re using:
### `adk.Runner`
`adk.Runner`is generally used in a local environment, like Colab. Most deployment options, like[Agent Engine Runtime](https://docs.cloud.google.com/agent-builder/agent-engine/develop/adk), offer their own runtime for ADK.
```
`importasynciofromgoogle.adk.sessionsimportVertexAiSessionServicefromgoogle.genaiimporttypes# You can use any ADK session service. This example uses Agent Engine Sessions.session\_service=VertexAiSessionService(project="PROJECT\_ID",location="LOCATION",agent\_engine\_id=agent\_engine\_id)# For Express Mode users, ensure your environment variables are set and# initialize VertexAiSessionService as follows:## session\_service = VertexAiSessionService(# agent\_engine\_id=agent\_engine\_id# )app\_name="APP\_NAME"runner=adk.Runner(agent=agent,app\_name=app\_name,session\_service=session\_service,memory\_service=memory\_service)asyncdefcall\_agent(query,session,user\_id):content=types.Content(role='user',parts=[types.Part(text=query)])events=runner.run\_async(user\_id=user\_id,session\_id=session,new\_message=content)asyncforeventinevents:ifevent.is\_final\_response():final\_response=event.content.parts[0].textprint("Agent Response: ",final\_response)`
```
Replace the following:
* APP\_NAME: The name of your ADK app.
### Agent Engine ADK template
The[Agent Engine ADK template](https://docs.cloud.google.com/agent-builder/agent-engine/develop/adk)(`AdkApp`) can be used both locally and to deploy an ADK agent to Agent Engine Runtime. When deployed on Agent Engine Runtime, the[Agent Engine ADK template](https://docs.cloud.google.com/agent-builder/agent-engine/develop/adk)uses`VertexAiMemoryBankService`as the default memory service, using the same Agent Engine instance for Memory Bank as the Agent Engine Runtime. You don&#39;t need to explicitly provide a memory service in this case.
See[Configure Agent Engine](https://docs.cloud.google.com/agent-builder/agent-engine/memory-bank/set-up#configure-agent-engine)for more details on setting up your Agent Engine Runtime, including how to customize the behavior of your Memory Bank.
Use the following code to deploy your ADK agent to Agent Engine Runtime:
**Note:**Express Mode users should follow the instructions for[Deploying from Source Files](https://docs.cloud.google.com/agent-builder/agent-engine/deploy#from-source-files)to deploy your ADK App.
```
`importasyncioimport[vertexai](https://docs.cloud.google.com/python/docs/reference/vertexai/latest)fromvertexai.agent\_enginesimport[AdkApp](https://docs.cloud.google.com/python/docs/reference/vertexai/latest/vertexai.preview.reasoning_engines.AdkApp.html)client=[vertexai](https://docs.cloud.google.com/python/docs/reference/vertexai/latest).Client(project="PROJECT\_ID",location="LOCATION")adk\_app=AdkApp(agent=agent)# Create a new Agent Engine with your agent deployed to Agent Engine Runtime.# The Agent Engine instance will also include an empty Memory Bank.agent\_engine=client.[agent\_engines](https://docs.cloud.google.com/python/docs/reference/vertexai/latest/vertexai._genai.agent_engines.html).create(agent\_engine=adk\_app,config={"staging\_bucket":"STAGING\_BUCKET","requirements":["google-cloud-aiplatform[agent\_engines,adk]"]})# Alternatively, update an existing Agent Engine to deploy your agent to Agent Engine Runtime.# Your agent will have access to the Agent Engine instance's existing memories.agent\_engine=client.[agent\_engines](https://docs.cloud.google.com/python/docs/reference/vertexai/latest/vertexai._genai.agent_engines.html).update(name=agent\_engine.[api\_resource](https://docs.cloud.google.com/python/docs/reference/vertexai/latest/vertexai._genai.types.AgentEngineDict.html#vertexai__genai_types_AgentEngineDict_api_resource).name,agent\_engine=adk\_app,config={"staging\_bucket":"STAGING\_BUCKET","requirements":["google-cloud-aiplatform[agent\_engines,adk]"]})asyncdefcall\_agent(query,session\_id,user\_id):asyncforeventinagent\_engine.[async\_stream\_query](https://docs.cloud.google.com/python/docs/reference/vertexai/latest/vertexai.preview.reasoning_engines.AdkApp.html#vertexai_preview_reasoning_engines_AdkApp_async_stream_query)(user\_id=user\_id,session\_id=session\_id,message=query,):print(event)`
```
Replace the following:
* PROJECT\_ID: Your project ID.
* LOCATION: Your region. See the[supported regions](https://docs.cloud.google.com/agent-builder/locations#supported-regions-agent-engine)for Memory Bank.
* AGENT\_ENGINE\_ID: The Agent Engine ID to use for Memory Bank. For example,`456`in`projects/my-project/locations/us-central1/reasoningEngines/456`.
* STAGING\_BUCKET: Your Cloud Storage bucket to use for staging your Agent Engine Runtime.
When run locally, the ADK template uses`InMemoryMemoryService`as the default memory service. However, you can override the default memory service to use`VertexAiMemoryBankService`:
```
`# For Google Cloud Project users:defmemory\_bank\_service\_builder():returnVertexAiMemoryBankService(project="PROJECT\_ID",location="LOCATION",agent\_engine\_id="AGENT\_ENGINE\_ID")# For Express Mode users, ensure your environment variables are set.## def memory\_bank\_service\_builder():# return VertexAiMemoryBankService(# agent\_engine\_id="AGENT\_ENGINE\_ID"# )adk\_app=AdkApp(agent=adk\_agent,# Override the default memory service.memory\_service\_builder=memory\_bank\_service\_builder)asyncdefcall\_agent(query,session\_id,user\_id):# adk\_app is a local agent. If you want to deploy it to Agent Engine Runtime,# use `client.agent\_engines.create(...)` or `client.agent\_engines.update(...)`# and call the returned Agent Engine instance instead.asyncforeventinadk\_app.async\_stream\_query(user\_id=user\_id,session\_id=session\_id,message=query,):print(event)`
```
Replace the following:
* PROJECT\_ID: Your project ID.
* LOCATION: Your region. See the[supported regions](https://docs.cloud.google.com/agent-builder/locations#supported-regions-agent-engine)for Memory Bank.
* AGENT\_ENGINE\_ID: The Agent Engine ID to use for Memory Bank. For example,`456`in`projects/my-project/locations/us-central1/reasoningEngines/456`.
## Interact with your agent
After defining your agent and setting up Memory Bank, you can interact with your agent.
1. Create your first session. Since there are no available memories during the first session with a user, the agent doesn&#39;t know any user preferences, such as their preferred temperature:
**Note:**There may be some variance in the agent and Memory Bank&#39;s responses depending on what models are used.
### `adk.Runner`
When using`adk.Runner`, you can call your ADK memory and session services directly.
```
`# Use `asyncio.run(session\_service.create(...))` if you're running this# code as a standard Python script.session=awaitsession\_service.create\_session(app\_name="APP\_NAME",user\_id="USER\_ID")# Use `asyncio.run(call\_agent(...))` if you're running this code as a# standard Python script.awaitcall\_agent("Can you update the temperature to my preferred temperature?",session.id,"USER\_ID")# Agent response: "What is your preferred temperature?"# Use `asyncio.run(call\_agent(...))` if you're running this code as a# standard Python script.awaitcall\_agent("I like it at 71 degrees",session.id,"USER\_ID")# Agent Response: Setting the temperature to 71 degrees Fahrenheit.# Temperature successfully changed.`
```
Replace the following:
* APP\_NAME: App name for your runner.
* USER\_ID: An identifier for your user. Memories generated from this session are keyed by this opaque identifier. The generated memories&#39; scope is stored as`{&quot;&quot;user\_id&quot;&quot;: &quot;&quot;USER\_ID&quot;}`.
### Agent Engine ADK template
When using the Agent Engine ADK template, you can call your Agent Engine Runtime to interact with memory and sessions.
```
`# Use `asyncio.run(agent\_engine.async\_create\_session(...))` if you're# running this code as a standard Python script.session=awaitagent\_engine.async\_create\_session(user\_id="USER\_ID")# Use `asyncio.run(call\_agent(...))` if you're running this code as a# standard Python script.awaitcall\_agent("Can you update the temperature to my preferred temperature?",session.get("id"),"USER\_ID")# Agent response: "What is your preferred temperature?"# Use `asyncio.run(call\_agent(...))` if you're running this code as a# standard Python script.awaitcall\_agent("I like it at 71 degrees",session.get("id"),"USER\_ID")# Agent Response: Setting the temperature to 71 degrees Fahrenheit.# Temperature successfully changed.`
```
Replace the following:
* USER\_ID: An identifier for your user. Memories generated from this session are keyed by this opaque identifier. The generated memories&#39; scope is stored as`{&quot;&quot;user\_id&quot;&quot;: &quot;&quot;USER\_ID&quot;}`.
* Generate memories for your current session. If Memory Bank extracts memories from the conversation, they are stored under the scope`{&quot;&quot;user\_id&quot;&quot;: USER\_ID, &quot;&quot;app\_name&quot;&quot;: APP\_NAME}`.
### `adk.Runner`
```
`asyncdeftrigger\_memory\_generation(app\_name,session):# Refresh your `session` object so that all of the session events locally available.session=awaitsession\_service.get\_session(app\_name=app\_name,user\_id="USER\_ID",session\_id=session.id)awaitmemory\_service.add\_session\_to\_memory(session)# Use `asyncio.run(trigger\_memory\_generation(...))` if you're running this# code as a standard Python script.awaittrigger\_memory\_generation(app\_name,session)`
```
### Agent Engine ADK template
**Note:**To use`async\_add\_session\_to\_memory`, your`AdkApp`must have been created with`google-cloud-aiplatform`version 1.110.0 or newer. Otherwise, you can trigger memory generation by making direct calls to Memory Bank.
```
`# Use `asyncio.run(agent\_engine.async\_add\_session\_to\_memory(...))` if# you're running this code as a standard Python script.awaitagent\_engine.async\_add\_session\_to\_memory(session=session)`
```
* Create your second session. If you used the`PreloadMemoryTool`, the agent retrieves memories at the beginning of each turn to access preferences the user previously communicated to the agent.
### `adk.Runner`
```
`# Use `asyncio.run(session\_service.create\_session(...))` if you're running# this code as a standard Python script.session=awaitsession\_service.create\_session(app\_name=app\_name,user\_id="USER\_ID")# Use `asyncio.run(call\_agent(...))` if you're running this code as a# standard Python script.awaitcall\_agent("Fix the temperature!",session.id,"USER\_ID")# Agent Response: Setting temperature to 71 degrees. Is that correct?`
```
You can also use`memory\_service.search\_memory`to retrieve memories directly:
```
`# Use `asyncio.run(memory\_service.search\_memory(...))` if you're running# this code as a standard Python script.awaitmemory\_service.search\_memory(app\_name="APP\_NAME",user\_id="USER\_ID",query="Fix the temperature!",)`
```
### Agent Engine ADK template
```
`# Use `asyncio.run(agent\_engine.async\_add\_session\_to\_memory(...))` if# you're running this code as a standard Python script.session=awaitagent\_engine.async\_create\_session(user\_id="USER\_ID")# Use `asyncio.run(call\_agent(...))` if you're running this code as a# standard Python script.awaitcall\_agent("Fix the temperature!",session.get("id"),"USER\_ID")# Agent Response: Setting temperature to 71 degrees. Is that correct?`
```
You can also use`agent\_engine.async\_search\_memory`to retrieve memories directly:
Note: To use`async\_search\_memory`, your`AdkApp`must have been created with`google-cloud-aiplatform`version 1.110.0 or newer. Otherwise, you can retrieve memories by making direct calls to Memory Bank.
```
`# Use `asyncio.run(agent\_engine.async\_search\_memory(...))` if you're# running this code as a standard Python script.awaitagent\_engine.async\_search\_memory(user\_id="USER\_ID",query="Fix the temperature!",)`
```
## Clean up
To clean up all resources used in this project, you can[delete the Google Cloud project](https://docs.cloud.google.com/resource-manager/docs/creating-managing-projects#shutting_down_projects)you used for the quickstart.
Otherwise, you can delete the individual resources you created in this tutorial,
as follows:
1. Use the following code sample to delete the Vertex AI Agent Engine instance, which also deletes any Sessions or Memories belonging to that Vertex AI Agent Engine.
```
`agent\_engine.delete(force=True)`
```
2. Delete any locally created files.
## What's next
* [Quickstart with Agent Engine SDK](https://docs.cloud.google.com/agent-builder/agent-engine/memory-bank/quickstart-api).
Send feedback
Except as otherwise noted, the content of this page is licensed under the[Creative Commons Attribution 4.0 License](https://creativecommons.org/licenses/by/4.0/), and code samples are licensed under the[Apache 2.0 License](https://www.apache.org/licenses/LICENSE-2.0). For details, see the[Google Developers Site Policies](https://developers.google.com/site-policies). Java is a registered trademark of Oracle and/or its affiliates.
Last updated 2025-12-16 UTC.
Need to tell us more?[[["Easy to understand","easyToUnderstand","thumb-up"],["Solved my problem","solvedMyProblem","thumb-up"],["Other","otherUp","thumb-up"]],[["Hard to understand","hardToUnderstand","thumb-down"],["Incorrect information or sample code","incorrectInformationOrSampleCode","thumb-down"],["Missing the information/samples I need","missingTheInformationSamplesINeed","thumb-down"],["Other","otherDown","thumb-down"]],["Last updated 2025-12-16 UTC."],[],[]]
