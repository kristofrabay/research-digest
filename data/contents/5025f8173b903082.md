# Build a Tiny AI Agent that Uses MCP Tools with LangGraph

**URL:** https://ai.plainenglish.io/build-a-tiny-ai-agent-that-uses-mcp-tools-with-langgraph-58a1bd3e6616
**Published:** 2025-09-08T05:29:24.000Z

---

## Summary

The webpage describes how to build a tiny AI agent using **Model Context Protocol (MCP)** servers and **LangGraph**.

Here is a summary of the concepts mentioned in relation to the user query:

*   **agent_infrastructure:** The core infrastructure discussed is the combination of an **MCP server** (to expose tools via a standard protocol) and a **LangGraph agent** (to control the agent loop and call those tools).
*   **tool use:** The example demonstrates an agent calling a simple `add(a, b)` tool exposed via an MCP server.
*   **agent frameworks:** **LangGraph** is explicitly used as the agent framework to build a stateful, controllable ReAct-style agent.
*   **LangChain:** The agent is built using LangChain components (`create_react_agent`, `ChatOpenAI`, and LangChain tools).
*   **LlamaIndex, OpenAI Agents SDK, Anthropic Agents SDK, Google SDK:** The article mentions that if you prefer **Anthropic**, you would install the corresponding provider instead of `langchain-openai`, but it does not detail the use of LlamaIndex or the specific SDKs for Anthropic/Google agents, focusing instead on the LangChain/LangGraph integration with MCP.
*   **function calling / structured outputs:** The MCP standard allows LLM apps to discover and call external tools. The example uses Python type hints (`a: int, b: int`) which implies structured input/output handling, and the SDK returns structured data.
*   **agent memory / agentic memory / agent orchestration:** The article suggests that once the single-agent loop is solid, the user should "add **memory/checkpointing**" and test **multi-agent orchestration** (router, supervisor/worker patterns) as next steps, but it does not implement these features in the tutorial itself.
*   **MCP servers:** A minimal MCP server is built using the **MCP Python SDK** (`FastMCP`) to expose the `add` tool.

**In short:** The page focuses on using **MCP** for standardized tool exposure and **LangGraph** (within a **LangChain** context) for agent control, with mentions of where to add memory and orchestration later.

---

## Full Content

Build a Tiny AI Agent that Uses MCP Tools with LangGraph | by Om Davra | Artificial Intelligence in Plain English
[Sitemap](https://ai.plainenglish.io/sitemap/sitemap.xml)
[Open in app](https://play.google.com/store/apps/details?id=com.medium.reader&amp;referrer=utm_source=mobileNavBar&amp;source=post_page---top_nav_layout_nav-----------------------------------------)
Sign up
[Sign in](https://medium.com/m/signin?operation=login&amp;redirect=https://ai.plainenglish.io/build-a-tiny-ai-agent-that-uses-mcp-tools-with-langgraph-58a1bd3e6616&amp;source=post_page---top_nav_layout_nav-----------------------global_nav------------------)
[Medium Logo](https://medium.com/?source=post_page---top_nav_layout_nav-----------------------------------------)
[
Write
](https://medium.com/m/signin?operation=register&amp;redirect=https://medium.com/new-story&amp;source=---top_nav_layout_nav-----------------------new_post_topnav------------------)
[
Search
](https://medium.com/search?source=post_page---top_nav_layout_nav-----------------------------------------)
Sign up
[Sign in](https://medium.com/m/signin?operation=login&amp;redirect=https://ai.plainenglish.io/build-a-tiny-ai-agent-that-uses-mcp-tools-with-langgraph-58a1bd3e6616&amp;source=post_page---top_nav_layout_nav-----------------------global_nav------------------)
![](https://miro.medium.com/v2/resize:fill:64:64/1*dmbNkD5D-u45r44go_cf0g.png)
[## Artificial Intelligence in Plain English
](https://ai.plainenglish.io/?source=post_page---publication_nav-78d064101951-58a1bd3e6616---------------------------------------)
·Follow publication
[
![Artificial Intelligence in Plain English](https://miro.medium.com/v2/resize:fill:76:76/1*9zAmnK08gUCmZX7q0McVKw@2x.png)
](https://ai.plainenglish.io/?source=post_page---post_publication_sidebar-78d064101951-58a1bd3e6616---------------------------------------)
New AI, ML and Data Science articles every day. Follow to join our 3.5M+ monthly readers.
Follow publication
# Build a Tiny AI Agent that Uses MCP Tools with LangGraph
[
![Om Davra](https://miro.medium.com/v2/resize:fill:64:64/1*eHMmhBn58mcV9ueqfZJo_Q.png)
](https://omdavra.medium.com/?source=post_page---byline--58a1bd3e6616---------------------------------------)
[Om Davra](https://omdavra.medium.com/?source=post_page---byline--58a1bd3e6616---------------------------------------)
5 min read
·Sep 8, 2025
[
](https://medium.com/m/signin?actionUrl=https://medium.com/_/vote/ai-in-plain-english/58a1bd3e6616&amp;operation=register&amp;redirect=https://ai.plainenglish.io/build-a-tiny-ai-agent-that-uses-mcp-tools-with-langgraph-58a1bd3e6616&amp;user=Om+Davra&amp;userId=cee584180ce9&amp;source=---header_actions--58a1bd3e6616---------------------clap_footer------------------)
--
[](https://medium.com/m/signin?actionUrl=https://medium.com/_/bookmark/p/58a1bd3e6616&amp;operation=register&amp;redirect=https://ai.plainenglish.io/build-a-tiny-ai-agent-that-uses-mcp-tools-with-langgraph-58a1bd3e6616&amp;source=---header_actions--58a1bd3e6616---------------------bookmark_footer------------------)
Listen
Share
> Want an agent that can call real tools without wiring bespoke APIs every time? In this tutorial you’ll build a micro **> MCP
**> server and a **> LangGraph
**> agent that talks to it. You’ll finish with a local, reproducible demo you can extend to your own tools.
Press enter or click to view image in full size
![]()
Source: Image by Author## Why MCP + LangGraph?
* **Model Context Protocol (MCP)**is a standard that lets LLM apps discover and call external*tools*and*resources*via a common protocol no more one-off adapters for each service. Anthropic and others are pushing it, and it’s catching on fast.
* **LangGraph**gives you a clean way to build stateful, controllable agents that can call tools, loop, and scale up to multi-agent setups.## What we’ll build
1. A minimal**MCP server**exposing a single tool (`add(a, b)`), using the official Python SDK.
2. A**LangGraph ReAct-style agent**that decides when to call that MCP tool to do math inside a conversation.
You can swap`add`for any real capability later: calendar ops, GitHub actions, file reads whatever your MCP servers expose.
## Prereqs (Python 3.10+)
```
pip install &quot;mcp[cli]&quot; langgraph langchain-openai pydantic
# If you prefer Anthropic/others, install those providers instead of/openai, but LangGraph stays the same.
```
* The**MCP SDK**gives us`FastMCP`for quick servers and a simple client API.
* The**LangGraph**package is the core agent framework. (Install is just`pip install -U langgraph`.)
> Tip: set your model key as an env var (e.g., `> OPENAI_API_KEY
`> ) if you use OpenAI.
### **Step 1: Write a tiny MCP server**
Create`mcp\_calc\_server.py`:
```
# mcp\_calc\_server.py
from mcp.server.fastmcp import FastMCP
mcp = FastMCP(&quot;CalcServer&quot;)
@mcp.tool()
def add(a: int, b: int) -&gt; int:
&quot;&quot;&quot;Add two integers and return the result.&quot;&quot;&quot;
return a + b
if \_\_name\_\_ == &quot;&quot;\_\_main\_\_&quot;&quot;:
# Direct execution; defaults to stdio transport so MCP clients can spawn it.
mcp.run()
```
This uses the official**FastMCP**helper: decorate Python functions, and they show up as callable MCP tools that any compliant client can discover and invoke. The repo’s “Direct Execution” pattern is exactly this.
## GetOm Davra’s stories in your inbox
Join Medium for free to get updates from this writer.
Subscribe
Subscribe
Run it in one terminal:
```
python mcp\_calc\_server.py
```
(We’ll also show how the agent can spawn it on demand.)
### **Step 2: Wrap the MCP tool as a LangGraph tool**
Create`agent\_with\_mcp.py`:
```
# agent\_with\_mcp.py
import asyncio
from typing import Any, Dict
from langgraph.prebuilt import create\_react\_agent
from langchain\_openai import ChatOpenAI
from langchain\_core.tools import tool
from mcp import ClientSession, StdioServerParameters
from mcp.client.stdio import stdio\_client
SERVER\_CMD = &quot;&quot;python&quot;&quot;
SERVER\_ARGS = [&quot;&quot;mcp\_calc\_server.py&quot;&quot;] # the file from Step 1
async def mcp\_call(tool\_name: str, arguments: Dict[str, Any]) -&gt;&gt; Any:
&quot;&quot;&quot;Generic MCP client call: spawn server via stdio, list tools, call one.&quot;&quot;&quot;
server\_params = StdioServerParameters(command=SERVER\_CMD, args=SERVER\_ARGS)
async with stdio\_client(server\_params) as (read, write):
async with ClientSession(read, write) as session:
await session.initialize()
# Optional: ensure the tool exists
\_ = await session.list\_tools()
# Call the MCP tool (returns structured result in modern SDKs)
result = await session.call\_tool(tool\_name, arguments=arguments)
# Depending on server return type, the SDK provides structured data or content blocks.
# Here we normalize to a plain value if possible:
try:
return result.output # structured field in recent versions
except AttributeError:
# Fallback: many examples expose a text block; stringify as a last resort.
return str(result)
@tool
def add\_via\_mcp(a: int, b: int) -&gt;&gt; str:
&quot;&quot;&quot;Use the MCP &#x27;add&#x27; tool to add two integers.&quot;&quot;&quot;
return str(asyncio.run(mcp\_call(&quot;&quot;add&quot;&quot;, {&quot;&quot;a&quot;&quot;: a, &quot;&quot;b&quot;&quot;: b})))
def build\_agent():
llm = ChatOpenAI(model=&quot;gpt-4o-mini&quot;) # or any OpenAI-compatible model
# If you prefer Anthropic, switch to langchain-anthropic&#x27;s ChatAnthropic.
agent = create\_react\_agent(llm, tools=[add\_via\_mcp])
return agent
if \_\_name\_\_ == &quot;&quot;\_\_main\_\_&quot;&quot;:
agent = build\_agent()
print(&quot;&quot;Try: &#x27;&#x27;What is 41 + 1? Use your tool.&#x27;&#x27;\\n&quot;&quot;)
while True:
try:
user = input(&quot;&gt; &quot;).strip()
if user.lower() in {&quot;exit&quot;, &quot;quit&quot;}:
break
resp = agent.invoke({&quot;messages&quot;: [(&quot;user&quot;, user)]})
# LangGraph returns a state; get the assistant message text:
last = resp[&quot;messages&quot;][-1].content
print(last)
except KeyboardInterrupt:
break
```
**What’s happening:**
* `mcp\_call`uses the**official client**(`ClientSession`+`stdio\_client`) to spin up your server and invoke the`add`tool. The SDK’s client docs show the same connect →list\_tools →call flow.
* `add\_via\_mcp`is a regular LangChain tool that delegates to MCP.
* `create\_react\_agent`gives you a simple ReAct-style agent that can decide to call the tool. (It’s part of LangGraph’s prebuilt helpers in current versions.)
> If you’d rather keep a long-running MCP server, you can run it once and point your client at it via **> Streamable HTTP
**> transport, which the SDK documents too.
### **Step 3: Run it**
In one terminal, leave the server running:
```
python mcp\_calc\_server.py
```
In another:
```
python agent\_with\_mcp.py
# &gt; What is 41 + 1? Use your tool.
# &quot;The result is 42.&quot; (and you’ll see the tool got invoked)
```
If you prefer the agent to**spawn**the server, you can skip running it manually`stdio\_client`will launch`mcp\_calc\_server.py`when needed. (That’s the pattern used in the SDK’s client examples.)
## What you learned
* **MCP**makes tools discoverable and callable in a standard way (tools/resources/prompts), and the**Python SDK**lets you build both servers and clients in a few lines.
* **LangGraph**gives you a controllable agent loop that can call those tools when it needs to.## Production notes (the “gotchas”)
* **Transport choice:**For dev,`stdio`is easiest. For services, prefer the**Streamable HTTP**transport; the SDK has patterns and Starlette/FastAPI mounting examples
* **Security &amp; auth:**MCP’s momentum is real, but treat tool access carefully (authN/Z, rate limits). Media coverage has flagged early-stage security/privacy considerations.
* **LangGraph patterns:**If your agent grows, split capabilities into specialists and orchestrate them (router, supervisor/worker, etc.). The LangChain/Graph docs and guides have examples.## Where to go next
* Swap`add`for a real tool e.g., a**filesystem**or**GitHub**MCP server, so your agent can read files or open PRs. (The SDK ships examples and a “FastMCP” quickstart.)
* Instrument your graph, add memory/checkpointing, and test multi-agent orchestration once the single-agent loop feels solid.## A message from our Founder
**Hey,**[**Sunil**](https://linkedin.com/in/sunilsandhu)**here.**I wanted to take a moment to thank you for reading until the end and for being a part of this community.
Did you know that our team run these publications as a volunteer effort to over 3.5m monthly readers?**We don’t receive any funding, we do this to support the community. ❤️**
If you want to show some love, please take a moment to**follow me on**[**LinkedIn**](https://linkedin.com/in/sunilsandhu)**,**[**TikTok**](https://tiktok.com/@messyfounder),[**Instagram**](https://instagram.com/sunilsandhu). You can also subscribe to our[**weekly newsletter**](https://newsletter.plainenglish.io/).
And before you go, don’t forget to**clap**and**follow**the writer️!
[
Artificial Intelligence
](https://medium.com/tag/artificial-intelligence?source=post_page-----58a1bd3e6616---------------------------------------)
[
Agents
](https://medium.com/tag/agents?source=post_page-----58a1bd3e6616---------------------------------------)
[
Langgraph
](https://medium.com/tag/langgraph?source=post_page-----58a1bd3e6616---------------------------------------)
[
Anthropic Claude
](https://medium.com/tag/anthropic-claude?source=post_page-----58a1bd3e6616---------------------------------------)
[
Langchain
](https://medium.com/tag/langchain?source=post_page-----58a1bd3e6616---------------------------------------)
[
![Artificial Intelligence in Plain English](https://miro.medium.com/v2/resize:fill:96:96/1*9zAmnK08gUCmZX7q0McVKw@2x.png)
](https://ai.plainenglish.io/?source=post_page---post_publication_info--58a1bd3e6616---------------------------------------)
[
![Artificial Intelligence in Plain English](https://miro.medium.com/v2/resize:fill:128:128/1*9zAmnK08gUCmZX7q0McVKw@2x.png)
](https://ai.plainenglish.io/?source=post_page---post_publication_info--58a1bd3e6616---------------------------------------)
Follow
[## Published inArtificial Intelligence in Plain English
](https://ai.plainenglish.io/?source=post_page---post_publication_info--58a1bd3e6616---------------------------------------)
[36K followers](https://ai.plainenglish.io/followers?source=post_page---post_publication_info--58a1bd3e6616---------------------------------------)
·[Last publishedjust now](https://ai.plainenglish.io/7-ai-tools-that-actually-make-your-job-easier-11e501a816bf?source=post_page---post_publication_info--58a1bd3e6616---------------------------------------)
New AI, ML and Data Science articles every day. Follow to join our 3.5M+ monthly readers.
Follow
[
![Om Davra](https://miro.medium.com/v2/resize:fill:96:96/1*eHMmhBn58mcV9ueqfZJo_Q.png)
](https://omdavra.medium.com/?source=post_page---post_author_info--58a1bd3e6616---------------------------------------)
[
![Om Davra](https://miro.medium.com/v2/resize:fill:128:128/1*eHMmhBn58mcV9ueqfZJo_Q.png)
](https://omdavra.medium.com/?source=post_page---post_author_info--58a1bd3e6616---------------------------------------)
[## Written byOm Davra
](https://omdavra.medium.com/?source=post_page---post_author_info--58a1bd3e6616---------------------------------------)
[9 followers](https://omdavra.medium.com/followers?source=post_page---post_author_info--58a1bd3e6616---------------------------------------)
·[14 following](https://medium.com/@omdavra/following?source=post_page---post_author_info--58a1bd3e6616---------------------------------------)
Tech writer for SaaS &amp; AI.
## No responses yet
[](https://policy.medium.com/medium-rules-30e5502c4eb4?source=post_page---post_responses--58a1bd3e6616---------------------------------------)
[
Help
](https://help.medium.com/hc/en-us?source=post_page-----58a1bd3e6616---------------------------------------)
[
Status
](https://status.medium.com/?source=post_page-----58a1bd3e6616---------------------------------------)
[
About
](https://medium.com/about?autoplay=1&amp;source=post_page-----58a1bd3e6616---------------------------------------)
[
Careers
](https://medium.com/jobs-at-medium/work-at-medium-959d1a85284e?source=post_page-----58a1bd3e6616---------------------------------------)
[
Press
](mailto:pressinquiries@medium.com)
[
Blog
](https://blog.medium.com/?source=post_page-----58a1bd3e6616---------------------------------------)
[
Privacy
](https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----58a1bd3e6616---------------------------------------)
[
Rules
](https://policy.medium.com/medium-rules-30e5502c4eb4?source=post_page-----58a1bd3e6616---------------------------------------)
[
Terms
](https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----58a1bd3e6616---------------------------------------)
[
Text to speech
](https://speechify.com/medium?source=post_page-----58a1bd3e6616---------------------------------------)
