# GPT-4o-vision for extraction of complex tables - Prompting - OpenAI Developer Community

**URL:** https://community.openai.com/t/gpt-4o-vision-for-extraction-of-complex-tables/1138461
**Published:** 2025-03-08T00:00:00.000Z

---

## Summary

The user is asking for suggestions on well-defined prompts for **`gpt-4o vision`** to accurately extract **complex tables** (those with grouped columns and rows) from PDFs as **Markdown format**.

The provided webpage is a post on the OpenAI Developer Community where a user is seeking exactly this advice, sharing the detailed system prompt they are currently using for table extraction with `gpt-4o vision`. The post itself does not contain the suggested solutions or successful prompts from other community members.

---

## Full Content

[Skip to main content](https://community.openai.com/t/gpt-4o-vision-for-extraction-of-complex-tables/1138461#main-container)

- [Topics](https://community.openai.com/latest)
- More

Resources

- [Documentation](https://platform.openai.com/overview)
- [API reference](https://platform.openai.com/docs/api-reference)
- [Help center](https://help.openai.com)

Categories

- [Announcements](https://community.openai.com/c/announcements/6)
- [API](https://community.openai.com/c/api/7)
- [Prompting](https://community.openai.com/c/prompting/8)
- [Documentation](https://community.openai.com/c/documentation/14)
- [Plugins / Actions builders](https://community.openai.com/c/gpts-builders/chat-plugins/20)
- [All categories](https://community.openai.com/categories)

Tags

- [chatgpt](https://community.openai.com/tag/chatgpt)
- [gpt-4](https://community.openai.com/tag/gpt-4)
- [api](https://community.openai.com/tag/api)
- [lost-user](https://community.openai.com/tag/lost-user)
- [assistants-api](https://community.openai.com/tag/assistants-api)
- [All tags](https://community.openai.com/tags)

Light mode

​

​

Welcome to the OpenAI Developer Community, a forum for **developers to meet and chat with other developers** building with OpenAI’s APIs and developer platform. This is not a place for ChatGPT discussion (unless you’re talking about its developer tools like Codex!). ChatGPT discussion can take place in the [OpenAI Discord community](https://discord.com/invite/openai).

What to know:

1. The Developer Community is community-run and maintained. Not all posts are monitored. To get in touch with OpenAI, reach out at [https://help.openai.com/en/?q=contact](https://help.openai.com/en/?q=contact).
2. Discussions related to the ChatGPT app and plans will be hidden, and your account may be suspended. (We must keep conversations focused on technical topics related to building with OpenAI, for the sake of the larger community here.)
3. Before posting a new topic, please [search the forum](https://community.openai.com/search) first for similar topics. This prevents duplicate discussions.
4. You use of this forum means you agree to the community guidelines, which includes being nice, productive, and constructive. Read the full community guildelines here: [FAQ - OpenAI Developer Community](https://community.openai.com/faq).

# [GPT-4o-vision for extraction of complex tables](https://community.openai.com/t/gpt-4o-vision-for-extraction-of-complex-tables/1138461)

[Prompting](https://community.openai.com/c/prompting/8)

[gpt-4](https://community.openai.com/tag/gpt-4), [gpt-4o](https://community.openai.com/tag/gpt-4o)

You have selected **0** posts.

select all

cancel selecting

[Mar 8](https://community.openai.com/t/gpt-4o-vision-for-extraction-of-complex-tables/1138461/1)

1 / 1

Mar 8

[Mar 8](https://community.openai.com/t/gpt-4o-vision-for-extraction-of-complex-tables/1138461/1)

[piam22](https://community.openai.com/u/piam22)

[Mar 8](https://community.openai.com/t/gpt-4o-vision-for-extraction-of-complex-tables/1138461)

I am trying to extract complex tables from pdf as markdown using `gpt-4o vision` preview version.
The model does a good job in extracting simple tables but fails to extract complex tables with grouped columns and rows.

**Could anyone suggest well defined prompts for `gpt-4o vision` to extract complex tables.**

**Note** As of now I do not want to use any hugging face OCR models.

Here is the prompt I am using.

```
messages = [

 {"role": "system", "content": (

 f"""

 You are an OCR-like data extraction tool designed to extract structured tables from images and convert them into Markdown format. The tables may contain grouped column headers and merged cells.

 You are expert in indentifying clear separation line for grouped columns and grouped rows in the input image.

 ### **Instructions for Table Extraction and Formatting:**

 1. **Identify Table Components**

 - Extract all headers, sub-headers, and data rows from the table image.

 - Preserve the **logical hierarchy** of the table.

 - If a column header spans multiple columns, ensure it is **repeated for each column** while maintaining clarity.

 2. **Handling Merged and Grouped Headers**

 - If a header spans multiple columns **repeat the header name across all relevant columns**.

 - For sub-groups under the same main header ensure they appear directly under their respective sections.

 - If a **cell spans multiple rows**, repeat its value across rows to maintain table structure.

 3. **Markdown Table Formatting**

 - Use the `|` character for table column separation.

 - Use `---` for column headers to differentiate them from data rows.

 - **Ensure proper alignment** and avoid breaking the Markdown table format.

 4. **Handling Multi-line Content**

 - If a cell contains multiple lines, use ` ` to separate them (e.g., `"100 (99.58) (0.42)"`).

 - If a section of the table is missing values, fill the cell with `"null"` rather than omitting it.

 5. **Edge Cases and Special Considerations**

 - Do not invent or interpolate data.

 - If any data is unreadable, output `"null"` instead of leaving it blank.

 - If special symbols (`|`, `_`, `*`) appear, escape them properly to avoid breaking Markdown formatting.

 ### **Your Task:**

 Extract tables from the provided image following these rules and output the result in **Markdown table format** with correctly repeated grouped headers. Once you extract

 the markdown you again iterate Step 1 to Step 5 and compare with the input base 64 image to check if you have not missed any column names

 or data and its in proper **Markdown format, so that if you convert that **Markdown to pdf you get original table back.

 """

 )},

 {"role": "user", "content": [

 {"type": "text", "text": (

 "Extract only the table from the provided image and return it in Markdown format. "

 "Ensure the table maintains correct row and column alignments, including grouped column headers. "

 "Use the pipe (`|`) format and ensure proper spacing for readability. "

 "Do not include any additional text, explanations, or formatting beyond the extracted table."

 )}

 ]}

 ]

 messages[1]["content"].append({"type": "image_url", "image_url": {"url": f"data:image/jpeg;base64,{encoded}"}})

```

[The image is a table showing error rates on different forms, categorized into high and low risk errors, with details on total fields, fields with errors, and error percentages for each form type. (Captioned by AI)850×328 41.2 KB](https://us1.discourse-cdn.com/openai1/original/4X/6/5/e/65e05544241021cd60e64ad47d22f03c24d0cf3b.png)

283views

Summarize

Reply

### Related topics

| Topic | Replies | Views | Activity |
| --- | --- | --- | --- |
| [GPT-4-vision extraction of tables with branched rows/vertically-merged cells](https://community.openai.com/t/gpt-4-vision-extraction-of-tables-with-branched-rows-vertically-merged-cells/728749) [Prompting](https://community.openai.com/c/prompting/8) [gpt-4-vision](https://community.openai.com/tag/gpt-4-vision) | [9](https://community.openai.com/t/gpt-4-vision-extraction-of-tables-with-branched-rows-vertically-merged-cells/728749/1) | 2.4k | [Mar 8](https://community.openai.com/t/gpt-4-vision-extraction-of-tables-with-branched-rows-vertically-merged-cells/728749/10) |
| [Data points in tables and charts in images](https://community.openai.com/t/data-points-in-tables-and-charts-in-images/835914) [Prompting](https://community.openai.com/c/prompting/8) [gpt-4](https://community.openai.com/tag/gpt-4) | [7](https://community.openai.com/t/data-points-in-tables-and-charts-in-images/835914/1) | 1.9k | [May 16](https://community.openai.com/t/data-points-in-tables-and-charts-in-images/835914/8) |
| [Using images as context in prompt](https://community.openai.com/t/using-images-as-context-in-prompt/731045) [Prompting](https://community.openai.com/c/prompting/8) [gpt-4](https://community.openai.com/tag/gpt-4) | [5](https://community.openai.com/t/using-images-as-context-in-prompt/731045/1) | 3.4k | [Apr 2024](https://community.openai.com/t/using-images-as-context-in-prompt/731045/6) |
| [Get formatted response for GPT-3.5-turbo](https://community.openai.com/t/get-formatted-response-for-gpt-3-5-turbo/205241) [Prompting](https://community.openai.com/c/prompting/8) [chatgpt](https://community.openai.com/tag/chatgpt) | [19](https://community.openai.com/t/get-formatted-response-for-gpt-3-5-turbo/205241/1) | 18.1k | [Nov 2023](https://community.openai.com/t/get-formatted-response-for-gpt-3-5-turbo/205241/20) |
| [Table extraction using langchain and gpt3.5 or 4o](https://community.openai.com/t/table-extraction-using-langchain-and-gpt3-5-or-4o/926899) [API](https://community.openai.com/c/api/7) [chatgpt](https://community.openai.com/tag/chatgpt), [gpt-4](https://community.openai.com/tag/gpt-4), [api](https://community.openai.com/tag/api), [gpt-35-turbo](https://community.openai.com/tag/gpt-35-turbo), [langchain](https://community.openai.com/tag/langchain) | [0](https://community.openai.com/t/table-extraction-using-langchain-and-gpt3-5-or-4o/926899/1) | 952 | [Aug 2024](https://community.openai.com/t/table-extraction-using-langchain-and-gpt3-5-or-4o/926899/1) |

Topic list, column headers with buttons are sortable.

Developer Community

Connect with other developers building with the OpenAI Platform.

Help

- [Support](https://help.openai.com/en/articles/6614161-how-can-i-contact-support)

Developer Resources

- [API Documentation](https://platform.openai.com/overview)
- [Service status](https://status.openai.com)
- [Cookbook](https://github.com/openai/openai-cookbook)

[Terms & policies](https://openai.com/policies) [Privacy policy](https://openai.com/policies/privacy-policy)

Invalid date

Invalid date
